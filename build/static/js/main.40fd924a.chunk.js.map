{"version":3,"sources":["constants/actionTypes.js","api/index.js","actions/posts.js","components/Posts/Post/styles.js","components/Posts/Post/Post.js","components/Posts/styles.js","components/Posts/Posts.js","components/Form/styles.js","components/Form/Form.js","components/styles.js","components/Pagination.jsx","components/Home/styles.js","components/Home/Home.js","components/Navbar/NavigationBar.js","components/Auth/styles.js","components/Auth/Input.js","components/Auth/Auth.js","actions/auth.js","actions/users.js","components/User/styles.js","components/User/Input.js","components/User/Profile.js","actions/chat/message.js","actions/chat/conversation.js","service/socket.js","components/Chat/Conversation.js","components/Chat/Messages.js","components/Chat/Message.js","components/User/UserList.js","components/Chat/Input.js","components/Chat/Chat.js","components/PostDetails/styles.js","components/PostDetails/PostDetails.jsx","App.js","reducers/auth.js","reducers/index.js","reducers/chat/conversations.js","reducers/chat/conversations-conversation-id.js","reducers/chat/messages.js","reducers/posts.js","reducers/users.js","index.js"],"names":["LOGOUT","API","axios","create","baseURL","interceptors","request","use","req","localStorage","getItem","headers","Authorization","JSON","parse","token","fetchPost","id","get","fetchPosts","page","likePost","patch","updatePost","updatedPost","deletePost","delete","signIn","formData","post","signUp","updateUser","updatedUser","fetchConversation","userId","fetchMessages","conversationId","getPostsBySearch","searchquery","dispatch","a","type","searchQuery","search","tags","data","payload","console","log","createPost","history","newPost","push","_id","api","makeStyles","media","height","paddingTop","backgroundColor","backgroundBlendMode","border","fullHeightCard","card","display","flexDirection","justifyContent","borderRadius","position","overlay","top","left","color","overlay2","right","grid","details","margin","title","padding","cardActions","cardAction","textAlign","Post","setCurrentId","useDispatch","classes","useStyles","user","useHistory","useState","Likes","likes","length","find","like","result","googleId","fontSize","Card","className","raised","elevation","ButtonBase","component","onClick","CardMedia","image","selectedFile","Typography","variant","owner","moment","createdAt","fromNow","creator","Button","style","size","map","tag","gutterBottom","CardContent","message","CardActions","disabled","undefined","theme","mainContainer","alignItems","smMargin","spacing","actionDiv","Posts","useSelector","state","posts","isLoading","CircularProgress","Grid","container","key","item","xs","sm","md","lg","root","paper","form","flexWrap","fileInput","width","buttonSubmit","marginBottom","Form","currentId","postData","setPostData","useEffect","clear","handleSubmit","e","preventDefault","firstname","Paper","autoComplete","noValidate","onSubmit","TextField","name","label","fullWidth","value","onChange","target","multiline","rows","split","multiple","onDone","base64","align","ul","Paginate","numberOfPages","getPosts","Pagination","count","Number","renderItem","PaginationItem","Link","to","appBarSearch","pagination","marginTop","gridContainer","breakpoints","down","mainDiv","Home","query","URLSearchParams","useLocation","setSearch","setTags","searchPost","trim","join","Grow","in","Container","maxWidth","justify","AppBar","onKeyPress","keyCode","onAdd","onDelete","tagToDelete","filter","searchButton","siteTitle","fontWeight","letterSpacing","toolbar","up","menuBox","menuOption","paddingLeft","menuIcon","heading","fontFamily","marginLeft","profile","userName","avatar","leftDiv","rightDiv","paddingRight","mobileBox","mobileHeading","NavigationBar","setUser","location","logout","actionType","decode","exp","Date","getTime","toggleMenu","toggleMenuOpen","setState","setResponsiveness","window","innerWidth","prevState","addEventListener","getToggleMenuOptions","Box","Divider","Toolbar","IconButton","Drawer","anchor","open","onClose","Avatar","alt","src","imageUrl","charAt","palette","secondary","main","submit","googleButton","Input","handleChange","half","autoFocus","handleShowPassword","required","InputProps","endAdornment","InputAdornment","initialState","firstName","lastName","email","password","confirmPassword","SignUp","setForm","isSignup","setIsSignup","showPassword","setShowPassword","router","signin","prevIsSignup","float","defaultValue","lastname","Profile","currentUserId","getMessages","getConversation","setConversationWith","socket","io","overflowY","purple","deepPurple","Label","paddingBottom","UserContent","Conversation","conversation","conversations","conversation_data","conversation_id","conversation_name","conversationData","setConversationData","fuck","stringify","d","removeQoute","replace","includes","pop","conversation_with","updatingFlag","setUpdatingFlag","on","inputRef","useRef","current","click","ref","Messages","justifyContentVal","setJustifyContentVal","setBackgroundColor","currentUser","background","content","scrollFeed","Message","messages","typing","SetTyping","emitMessageRespond","setEmitMessageRespond","userLink","UserList","userlist","users","participants","setParticipants","error","messageTextfield","sendButton","messsageData","setMessageData","setKeyPressCount","lastMessageId","conAndMsgData","myMessage","setMyMessage","handleMessage","prev","newMessage","emit","conversationAndMessage","newConversationAndMessage","messageBody","controller","messagePaper","Chat","objectFit","maxHeight","section","flex","imageSection","recommendedPosts","loadingPaper","PostDetails","useParams","getPost","cursor","openPost","App","path","exact","Auth","authReducer","authData","action","setItem","loading","errors","combineReducers","auth","currentPage","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","reducers","applyMiddleware","thunk","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.40fd924a.chunk.js","sourcesContent":["export const CREATE = 'CREATE';\nexport const UPDATE = 'UPDATE';\nexport const DELETE = 'DELETE';\nexport const FETCH = 'FETCH';\nexport const FETCH_ALL = 'FETCH_ALL';\nexport const FETCH_BY_SEARCH = 'FETCH_BY_SEARCH';\nexport const LIKE = 'LIKE';\n\nexport const AUTH = 'AUTH';\nexport const LOGOUT = 'LOGOUT';\n\n//USERS\nexport const FETCH_USERS = 'FETCH_USERS';\n\n//POSTS\nexport const FETCH_POST = 'FETCH_POST';\nexport const FETCH_POSTS = 'FETCH_POSTS';\n\n//CONVERSATION\nexport const FETCH_CONVERSATION = 'FETCH_CONVERSATION';\nexport const FETCH_CONVERSATIONS = 'FETCH_CONVERSATIONS';\nexport const SET_CONVERSATION_ID = 'SET_CONVERSATION';\nexport const GET_CONVERSATION_ID = 'GET_CONVERSATION';\nexport const SET_CONVERSATION_WITH = 'SET_CONVERSATION_WITH';\nexport const CREATE_CONVERSATION = 'CREATE_CONVERSATION';\nexport const CREATE_CONVERSATION_AND_MESSAGE = 'CREATE_CONVERSATION_AND_MESSAGE';\nexport const RESET_CONVERSATION_DATA = 'RESET_CONVERSATION_DATA';\n\n//MESSAGE\nexport const FETCH_MESSAGE = 'FETCH_MESSAGE';\nexport const FETCH_MESSAGES = 'FETCH_MESSAGES';\nexport const CREATE_MESSAGE = 'CREATE_MESSAGE';\nexport const RESET_MESSAGES = 'RESET_MESSAGES';\n\n//NEW\nexport const START_LOADING = 'START_LOADING';\nexport const END_LOADING = 'END_LOADING';\n","import axios from 'axios';\n \n//cloud\nconst API = axios.create({ baseURL: 'https://merntradebaits.herokuapp.com/' });\n\n//local\n// const API = axios.create({ baseURL: 'http://localhost:5555' });\n\nAPI.interceptors.request.use((req) => {\n  if (localStorage.getItem('profile')) {\n    req.headers.Authorization = `Bearer ${JSON.parse(localStorage.getItem('profile')).token}`;\n  }\n\n  return req;\n});\n\nexport const fetchPost = (id) => API.get(`/posts/${id}`);\nexport const fetchPosts = (page) => API.get(`/posts?page=${page}`);\n\nexport const fetchPostsBySearch = (searchQuery) => API.get(`/posts/search?searchQuery=${searchQuery.search || 'none'}&tags=${searchQuery.tags}`) // query params starts with question mark\n\nexport const createPost = (newPost) => API.post('/posts', newPost);\nexport const likePost = (id) => API.patch(`/posts/${id}/likePost`);\nexport const updatePost = (id, updatedPost) => API.patch(`/posts/${id}`, updatedPost);\nexport const deletePost = (id) => API.delete(`/posts/${id}`);\n\nexport const signIn = (formData) => API.post('/users/signin', formData);\nexport const signUp = (formData) => API.post('/users/signup', formData);\n\nexport const fetchUsers = () => API.get('/users');\nexport const updateUser = (id, updatedUser) => API.patch(`/users/profile/${id}`, updatedUser);\n\nexport const fetchConversation = (userId) => API.get(`/chat/conversations/${userId}`);\n\nexport const createConversation = (newConversation) => API.post('/chat/conversations', newConversation);\nexport const createConversationAndMessage = (newConversationAndMessage) => API.post('/chat/conversations', newConversationAndMessage);\n\nexport const fetchMessages = (conversationId) => API.get(`/chat/messages/${conversationId}`);\nexport const createMessage = (newMessage) => API.post('/chat/messages', newMessage);\n\n\n","import { FETCH_POSTS, CREATE, UPDATE, DELETE, LIKE, FETCH, FETCH_BY_SEARCH, START_LOADING, END_LOADING } from '../constants/actionTypes';\nimport * as api from '../api/index.js';\n\n\nexport const getPost = (id) => async (dispatch) => {\n  try {\n    dispatch({ type: START_LOADING });\n    const { data } = await api.fetchPost(id);\n\n    dispatch({ type: FETCH, payload: data});\n    dispatch({ type: END_LOADING });\n  }\n  catch (error) {\n    console.log('client>src>action>posts>getPost ERROR: ', error);\n  }\n};\n\nexport const getPosts = (page) => async (dispatch) => {\n  try {\n    dispatch({ type: START_LOADING });\n    const { data } = await api.fetchPosts(page);\n    \n    dispatch({ type: FETCH_POSTS, payload: data });\n    dispatch({ type: END_LOADING });\n  } catch (error) {\n    console.log('client>src>action>posts>getPosts: ', error);\n  }\n};\n\nexport const getPostsBySearch = (searchquery) => async (dispatch) => {\n\n  try {\n    dispatch({ type: START_LOADING });\n    //destructure 2 times\n    const { data: { data } } = await api.fetchPostsBySearch(searchquery);\n\n        dispatch({ type: FETCH_BY_SEARCH, payload: data });\n        dispatch({ type: END_LOADING });\n\n\n  } catch(error) {\n\n    console.log('getPostsBySearch error: ', error)\n  }\n}\n//accept the history object that came from the front end\nexport const createPost = (post, history) => async (dispatch) => {\n  try {\n    dispatch({ type: START_LOADING });\n    const { data } = await api.createPost(post);\n    history.push(`/posts/${data._id}`)\n    dispatch({ type: CREATE, payload: data });\n  } catch (error) {\n    console.log(error);\n  }\n};\n\nexport const updatePost = (id, post) => async (dispatch) => {\n  try {\n\n    const { data } = await api.updatePost(id, post);\n    \n    //console.log('action/action/updatePost payload data: ', data);\n    dispatch({ type: UPDATE, payload: data });\n  } catch (error) {\n    console.log(error);\n  }\n};\n\nexport const likePost = (id) => async (dispatch) => {\n  const user = JSON.parse(localStorage.getItem('profile'));\n\n  try {\n    const { data } = await api.likePost(id, user?.token);\n\n    dispatch({ type: LIKE, payload: data });\n  } catch (error) {\n    console.log(error);\n  }\n};\n\nexport const deletePost = (id) => async (dispatch) => {\n  try {\n    await await api.deletePost(id);\n\n    dispatch({ type: DELETE, payload: id });\n  } catch (error) {\n    console.log(error);\n  }\n};\n","import { makeStyles } from '@material-ui/core/styles';\n\nexport default makeStyles({\n  media: {\n    height: 0,\n    paddingTop: '56.25%',\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n    backgroundBlendMode: 'darken',\n\n  },\n  border: {\n    border: 'solid',\n  },\n  fullHeightCard: {\n    height: '100%',\n  },\n  card: {\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'space-between',\n    borderRadius: '15px',\n    height: '100%',\n    position: 'relative',\n  },\n  overlay: {\n    position: 'absolute',\n    top: '20px',\n    left: '20px',\n    color: 'white',\n  },\n  overlay2: {\n    position: 'absolute',\n    top: '20px',\n    right: '20px',\n    color: 'white',\n  },\n  grid: {\n    display: 'flex',\n  },\n  details: {\n    display: 'flex',\n    justifyContent: 'space-between',\n    margin: '20px',\n  },\n  title: {\n    padding: '0 16px',\n  },\n  cardActions: {\n    padding: '0 16px 8px 16px',\n    display: 'flex',\n    justifyContent: 'space-between',\n  },\n  cardAction: {\n    display: 'block',\n    textAlign: 'initial',\n  },\n});\n","import React, { useState } from 'react';\nimport { Card, CardActions, CardContent, CardMedia, Button, Typography, ButtonBase } from '@material-ui/core/';\nimport ThumbUpAltIcon from '@material-ui/icons/ThumbUpAlt';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport MoreHorizIcon from '@material-ui/icons/MoreHoriz';\nimport ThumbUpAltOutlined from '@material-ui/icons/ThumbUpAltOutlined';\nimport { useDispatch } from 'react-redux';\nimport moment from 'moment';\nimport { likePost, deletePost } from '../../../actions/posts';\nimport useStyles from './styles';\nimport { useHistory } from 'react-router-dom'\n// import io from 'socket.io-client';\n// let socket;\n// const ENDPOINT = 'localhost:5555';\n\nconst Post = ({ post, setCurrentId }) => {\n\n  // message debugger...\n  console.log('[POST] ', post);\n\n  //THIS SELECTOR WILL FIND THE UPDATED POST AND RE-RENDER THE UPDATED DATA..\n  //const updatedPost = useSelector((state) => (state.posts.find((post) => post._id === post._id)));\n\n  const dispatch = useDispatch();\n  const classes = useStyles();\n  const user = JSON.parse(localStorage.getItem('profile'));\n  const history = useHistory();\n\n  //socket = io(ENDPOINT);\n  const [like, setLike] = useState(false);\n\n  // useEffect(() => {\n  //     console.log(\n  //       '-[POST] 1ST useEffect ','\\n',\n  //       'likes: ', post.likes.length,'\\n',\n  //       'title', post.title\n  //       );\n\n  // },[post]);\n\n\n  // useEffect(() => {\n\n  //   console.log(\n  //     '-[POST] 2ND useEffect ','\\n',\n  //     'likes: ', post.likes.length,'\\n',\n  //     'title:', post.title\n  //     );\n\n  //     socket.on('updateLike', () => {\n  //     console.log('-[POST] ',\n  //     '2ND  useEffect when like is clicked => received => dataFrom => server => io.emit.');\n  //     setLike(true);\n   \n  //   });\n  // }, []); \n\n  const handleLikesEvent = () => {\n\n         dispatch(likePost(post._id));\n  }\n\n  const Likes = () => { \n      //console.log('-[POST] THIS LINE IS BELOW Likes()');\n      if (post?.likes?.length > 0) {\n        return post.likes.find((like) => like === (user?.result?.googleId || user?.result?._id))\n          ? (\n            <><ThumbUpAltIcon fontSize=\"small\" />&nbsp;{post.likes.length > 2 ? `You and ${post.likes.length - 1} others` : `${post.likes.length} like${post.likes.length > 1 ? 's' : ''}` }</>\n          ) : (\n            <><ThumbUpAltOutlined fontSize=\"small\" />&nbsp;{post.likes.length} {post.likes.length === 1 ? 'Like' : 'Likes'}</>\n          );\n      }    \n\n      return <><ThumbUpAltOutlined fontSize=\"small\" />&nbsp;Like</>;    \n  };\n\n  const openPost = () => history.push(`/posts/${post._id}`);\n\n  return (\n    <Card className={classes.card} raised elevation={6}>\n      <ButtonBase\n       component=\"span\"\n       className={classes.cardAction} \n       onClick={openPost}\n       >\n          <CardMedia className={classes.media} image={post.selectedFile || 'https://user-images.githubusercontent.com/194400/49531010-48dad180-f8b1-11e8-8d89-1e61320e1d82.png'} title={post.title} />\n          <div className={classes.overlay}>\n            <Typography variant=\"h6\">{post.owner}</Typography>\n            <Typography variant=\"body2\">{moment(post.createdAt).fromNow()}</Typography>\n          </div>\n          {(user?.result?.googleId === post?.creator || user?.result?._id === post?.creator) && (\n          <div className={classes.overlay2}>\n            <Button onClick={() => setCurrentId(post._id)} style={{ color: 'white' }} size=\"small\">\n              <MoreHorizIcon fontSize=\"default\" />\n            </Button>\n          </div>\n          )}\n          <div className={classes.details}>\n            <Typography variant=\"body2\" color=\"textSecondary\" component=\"h2\">{post.tags.map((tag) => `#${tag} `)}</Typography>\n          </div>\n          <Typography className={classes.title} gutterBottom variant=\"h5\" component=\"h2\">{post.title}</Typography>\n          <CardContent>\n            <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">{post.message}</Typography>\n          </CardContent>\n      </ButtonBase>\n      <CardActions className={classes.cardActions}>\n        {/* <Button size=\"small\" color=\"primary\" disabled={!user?.result} onClick={() => dispatch(likePost(post._id))}> */}\n        <Button size=\"small\" color=\"primary\" disabled={!user?.result} onClick={handleLikesEvent}>\n\n          <Likes /> \n        </Button>\n        {/* {(user?.result?.googleId === post?.creator || user?.result?._id === post?.creator) && ( */}\n        {(user?.result?._id !== undefined && user?.result?._id === post?.creator) && (\n        <Button size=\"small\" color=\"secondary\" onClick={() => dispatch(deletePost(post._id))}>\n          <DeleteIcon fontSize=\"small\" /> Delete\n        </Button>\n        )}\n      </CardActions>\n    </Card>\n  );\n};\n\nexport default Post;\n","import { makeStyles } from '@material-ui/core/styles';\n\nexport default makeStyles((theme) => ({\n  mainContainer: {\n    display: 'flex',\n    alignItems: 'center',\n  },\n  smMargin: {\n    margin: theme.spacing(1),\n  },\n  actionDiv: {\n    textAlign: 'center',\n  },\n}));\n","import React from 'react';\nimport { Grid, CircularProgress } from '@material-ui/core';\nimport { useSelector } from 'react-redux';\nimport Post from './Post/Post';\nimport useStyles from './styles';\n\nconst Posts = ({ setCurrentId }) => {\n\n  const classes = useStyles();\n  const { posts, isLoading } = useSelector((state) => state.posts);\n\n  console.log('[POSTS] useSelector posts: ', posts);\n\n\n  if(!posts.length && !isLoading) return 'No posts'\n\n  return (\n    isLoading ? <CircularProgress /> : (\n      <Grid className={classes.container} container alignItems=\"stretch\" spacing={3}>\n        {posts?.map((post) => (\n          <Grid key={post._id} item xs={12} sm={12} md={6} lg={3}>\n            <Post post={post} setCurrentId={setCurrentId} />\n          </Grid>\n        ))}\n      </Grid>\n    )\n  );\n\n\n};\n\nexport default Posts;\n","\nimport { makeStyles } from '@material-ui/core/styles';\n\nexport default makeStyles((theme) => ({\n  root: {\n    '& .MuiTextField-root': {\n      margin: theme.spacing(1),\n    },\n  },\n  paper: {\n    padding: theme.spacing(2),\n  },\n  form: {\n    display: 'flex',\n    flexWrap: 'wrap',\n    justifyContent: 'center',\n  },\n  fileInput: {\n    width: '97%',\n    margin: '10px 0',\n  },\n  buttonSubmit: {\n    marginBottom: 10,\n  },\n}));\n","import React, { useState, useEffect } from 'react';\nimport { TextField, Button, Typography, Paper } from '@material-ui/core';\nimport { useDispatch, useSelector } from 'react-redux';\nimport FileBase from 'react-file-base64';\nimport { createPost, updatePost } from '../../actions/posts';\nimport useStyles from './styles';\nimport { useHistory } from 'react-router-dom';\n\nconst Form = ({ currentId, setCurrentId }) => {\n\n  const [postData, setPostData] = useState({ title: '', owner: '', message: '', tags: '', selectedFile: '' });\n  const post = useSelector((state) => (currentId ? state.posts.posts.find((message) => message._id === currentId) : null)) ;\n  const dispatch = useDispatch();\n  const classes = useStyles();\n  const user = JSON.parse(localStorage.getItem('profile'));\n  const history = useHistory();\n\n  useEffect(() => {\n    if (post) setPostData(post);\n  }, [post]);\n\n  const clear = () => {\n    setCurrentId(0);\n    setPostData({ title: '', owner: '', message: '', tags: '', selectedFile: '' });\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n\n    if (currentId === 0) {\n      dispatch(createPost({ ...postData, owner: user?.result?.firstname }, history));\n      // do not call the history here like <history.push>\n      clear();\n    } else {\n      \n      dispatch(updatePost(currentId, { ...postData, owner: user?.result?.firstname}));\n      clear();\n    }\n  };\n\n  if (!user?.result?._id) {\n    return (\n      <Paper className={classes.paper}>\n        <Typography variant=\"h6\" align=\"center\">\n          Please Sign In to upload photo/s \n        </Typography>\n      </Paper>\n    );\n  }\n\n  return (\n    <Paper className={classes.paper} elevation={6}>\n      <form autoComplete=\"off\" noValidate className={`${classes.root} ${classes.form}`} onSubmit={handleSubmit}>\n        <Typography variant=\"h6\">{currentId ? `Editing \"${post.title}\"` : 'Creating a Post'}</Typography>\n        <TextField name=\"title\" variant=\"outlined\" label=\"Title\" fullWidth value={postData.title} onChange={(e) => setPostData({ ...postData, title: e.target.value })} />\n        <TextField name=\"message\" variant=\"outlined\" label=\"Message\" fullWidth multiline rows={4} value={postData.message} onChange={(e) => setPostData({ ...postData, message: e.target.value })} />\n        <TextField name=\"tags\" variant=\"outlined\" label=\"Tags (coma separated)\" fullWidth value={postData.tags} onChange={(e) => setPostData({ ...postData, tags: e.target.value.split(',') })} />\n        <div className={classes.fileInput}><FileBase type=\"file\" multiple={false} onDone={({ base64 }) => setPostData({ ...postData, selectedFile: base64 })} /></div>\n        <Button className={classes.buttonSubmit} variant=\"contained\" color=\"primary\" size=\"large\" type=\"submit\" fullWidth>Submit</Button>\n        <Button variant=\"contained\" color=\"secondary\" size=\"small\" onClick={clear} fullWidth>Clear</Button>\n      </form>\n    </Paper>\n  );\n};\n\nexport default Form;\n","import { makeStyles } from '@material-ui/core/styles';\r\n\r\nexport default makeStyles(() => ({\r\n    ul: {\r\n        justifyContent: 'space-around'\r\n    }\r\n}))","import React, { useEffect } from 'react'\r\nimport { Pagination, PaginationItem } from '@material-ui/lab';\r\nimport useStyles from './styles';\r\nimport { Link } from 'react-router-dom';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { getPosts } from '../actions/posts';\r\n\r\nconst Paginate = ({ page }) => {\r\n\r\n    const { numberOfPages } = useSelector((state) => state.posts)\r\n    const classes = useStyles();\r\n    const dispatch = useDispatch();\r\n\r\n    useEffect(() => {\r\n        if(page) dispatch(getPosts(page));\r\n   \r\n      \r\n      }, [page]);\r\n\r\n    return (\r\n        <Pagination\r\n            classes={{ ul: classes.ul }}\r\n            count={numberOfPages}\r\n            page={Number(page) || 1}\r\n            variant=\"outlined\"\r\n            color=\"primary\"\r\n            renderItem={(item) => (\r\n                <PaginationItem {...item} component={Link} to={`/posts?page=${item.page}`} />\r\n            )}\r\n        />\r\n    )\r\n}\r\n\r\nexport default Paginate;","\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nexport default makeStyles((theme) => ({\r\n  appBarSearch: {\r\n    borderRadius: 4,\r\n    marginBottom: '1rem',\r\n    display: 'flex',\r\n    padding: '16px',\r\n  },\r\n\r\n  pagination: {\r\n    borderRadius: 4,\r\n    marginTop: '1rem',\r\n    padding: '16px',\r\n  },\r\n\r\n  gridContainer: {\r\n    display: 'flex',\r\n    [theme.breakpoints.down('xs')]: {\r\n      flexDirection: 'column-reverse',\r\n    },\r\n    [theme.breakpoints.down('md')]: {\r\n        flexDirection: 'column-reverse',\r\n      },\r\n  },\r\n\r\n  mainDiv: {\r\n    display: 'flex'\r\n  },\r\n\r\n\r\n}));","\nimport React, { useState } from 'react';\nimport { Container, Grow, Grid , Paper, AppBar, TextField, Button} from '@material-ui/core';\nimport { useDispatch } from 'react-redux';\nimport { getPosts, getPostsBySearch } from '../../actions/posts';\nimport Posts from '../Posts/Posts';\nimport Form from '../Form/Form';\nimport Pagination from '../Pagination'\nimport { useHistory, useLocation } from 'react-router-dom';\nimport ChipInput from 'material-ui-chip-input';\nimport useStyles from './styles';\n\nfunction useQuery() {\n  return new URLSearchParams(useLocation().search);\n}\n\nconst Home = () => {\n  const classes = useStyles();\n  const [currentId, setCurrentId] = useState(0);\n  const dispatch = useDispatch();\n  const query = useQuery();\n  const history = useHistory();\n  const page = query.get('page') || 1;\n  const searchQuery = query.get('searchQuery');\n\n  const [search, setSearch] = useState('');\n  const [tags, setTags] = useState([]);\n\n  // useEffect(() => {\n  //   dispatch(getPosts());\n  \n  // }, [currentId, dispatch]);\n\n    const searchPost = () => {\n      if(search.trim() || tags) {\n        //dispatch -> fetch search posts\n        dispatch(getPostsBySearch({search, tags:  tags.join(',')  }));\n        history.push(`/posts/search?searchQuery=${search || 'none'} &tags=${tags.join(',')}`);\n      } else {\n        history.push('/')\n      }\n    }\n\n    const handleKeyPress = (e) => {\n      if(e.keyCode === 13) {\n        searchPost();\n      }\n    }\n\n    const handleAdd = (tag) => setTags([... tags, tag]);\n    const handleDelete = (tagToDelete) => setTags(tags.filter((tag) => tag !== tagToDelete));\n\n  return (\n    <Grow in>\n      <Container maxWidth=\"xl\">\n        <Grid container justify= \"space-between\" alignItems=\"stretch\"  spacing={3} className={classes.gridContainer} >\n          <Grid item xs={12} sm={6} md={9} >\n            <Posts setCurrentId={setCurrentId} />\n          </Grid>\n          <Grid item xs={12} sm={6} md={3}>\n          <AppBar className={classes.appBarSearch} position=\"static\" color=\"inherit\"> \n            <TextField \n              name=\"search\" \n              variant=\"outlined\" \n              label=\"Search Posts\" \n              fullWidth\n              value={search} \n              onChange={(e) => setSearch(e.target.value)} \n              onKeyPress={handleKeyPress}\n            />\n            <ChipInput \n              style={{ margin: '10px 0'}}\n              value={tags}\n              onAdd={handleAdd}\n              onDelete={handleDelete}\n              label=\"Search Hash Tags\"\n              variant=\"outlined\"\n            />\n\n            <Button onClick={searchPost} className={classes.searchButton} variant=\"contained\" color=\"primary\">Search</Button>\n\n          </AppBar>\n            <Form currentId={currentId} setCurrentId={setCurrentId} />\n\n            {(!searchQuery && !tags.length) && (\n              <Paper elevation={6} className={classes.pagination}>\n              <Pagination page={page} />\n            </Paper>\n            )}\n\n          </Grid>\n        </Grid>\n      </Container>\n    </Grow>\n  );\n\n};\n\nexport default Home;\n","import React, { useEffect, useState } from 'react';\r\nimport { Container, Toolbar, Typography, Box, AppBar, IconButton, Drawer, Button, Avatar, Divider } from '@material-ui/core'; \r\nimport MenuIcon   from '@material-ui/icons/Menu';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport AcUnitIcon from '@material-ui/icons/AcUnit';\r\nimport { Link, useHistory, useLocation } from 'react-router-dom';\r\nimport { useDispatch } from 'react-redux';\r\nimport decode from 'jwt-decode';\r\nimport * as actionType from '../../constants/actionTypes';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\r\n  siteTitle: {\r\n    fontWeight: 'bold',\r\n    letterSpacing: 1.5\r\n  },\r\n  toolbar: {\r\n    backgroundColor: '#6db4e3',\r\n    display: 'flex',\r\n    flexDirection: 'row',\r\n    [theme.breakpoints.up('md')]: {\r\n      flexDirection: 'row',\r\n      justifyContent: 'space-between'\r\n    }\r\n  },\r\n  menuBox: {\r\n    display: 'flex',\r\n    flexDirection: 'row',\r\n    [theme.breakpoints.up('md')]: {\r\n      flexDirection: 'row'\r\n    }\r\n  },\r\n  menuOption: {\r\n    padding: theme.spacing(1),\r\n    [theme.breakpoints.up('md')]: {\r\n      paddingLeft: theme.spacing(10)\r\n    },\r\n    color: 'white'\r\n  },\r\n  menuIcon: {\r\n    color: 'white',\r\n    fontSize: '33px'\r\n  },\r\n  heading: {\r\n      display: 'flex',\r\n      fontFamily: 'Segoe UI',\r\n      marginLeft: '33px',\r\n  },\r\n  profile: {\r\n    display: 'flex',\r\n  },\r\n  userName: {\r\n    display: 'flex',\r\n    fontFamily: 'Segoe UI',\r\n    alignItems: 'center',\r\n    padding : '11px 11px 11px 11px'\r\n  },\r\n  avatar: {\r\n    padding : '11px 11px 11px 11px',\r\n    color: 'gray',\r\n    backgroundColor: 'white',\r\n  },\r\n  leftDiv: {\r\n    display: 'flex',\r\n    flexDirection: 'row',\r\n    paddingLeft: '33px'\r\n  },\r\n  rightDiv: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    paddingRight: '3em',\r\n  },\r\n  mobileBox: {\r\n    display: 'flex'\r\n  },\r\n  mobileHeading: {\r\n    display: 'flex',\r\n    justifyContent: 'center',\r\n    fontFamily: 'Segoe UI',\r\n  }\r\n  \r\n}));\r\n\r\nexport default function NavigationBar() {\r\n    const [user, setUser] = useState(JSON.parse(localStorage.getItem('profile')));\r\n    const dispatch = useDispatch();\r\n    const location = useLocation();\r\n    const history = useHistory();\r\n    const classes = useStyles();\r\n  \r\n    const logout = () => {\r\n        dispatch({ type: actionType.LOGOUT });\r\n        history.push('/auth');\r\n        setUser(null);\r\n      };\r\n\r\n      useEffect(() => {\r\n        const token = user?.token;\r\n    \r\n        if (token) {\r\n          const decodedToken = decode(token);\r\n          if (decodedToken.exp * 1000 < new Date().getTime()) logout();\r\n        }\r\n    \r\n        setUser(JSON.parse(localStorage.getItem('profile')));\r\n      }, [location]);\r\n  \r\n  const [state, setState] = useState({\r\n    toggleMenu: false,\r\n    toggleMenuOpen: false\r\n  });\r\n  \r\n  const { toggleMenu, toggleMenuOpen } = state;\r\n  \r\n  useEffect(() => {\r\n    \r\n    const setResponsiveness = () => {\r\n      \r\n      return window.innerWidth < 960\r\n        ? setState((prevState) => ({ ...prevState, toggleMenu: true }))\r\n        : setState((prevState) => ({ ...prevState, toggleMenu: false}));\r\n      \r\n    };\r\n    \r\n    setResponsiveness();\r\n    \r\n    window.addEventListener(\"resize\", () => setResponsiveness());\r\n    \r\n  }, []);\r\n\r\n  //mobile\r\n  const displayToggleMenu = () => {\r\n    \r\n    const handleToggleMenuOpen = ()  =>  setState((prevState) => ({ ...prevState,  toggleMenuOpen: true })); \r\n    const handleToggleMenuClose = () => setState((prevState) => ({ ...prevState, toggleMenuOpen: false }));\r\n    \r\n    return (\r\n      <Toolbar style={{ backgroundColor: '#6db4e3'}}>\r\n        <IconButton {...{ onClick: handleToggleMenuOpen }}>\r\n          <MenuIcon className={classes.menuIcon}/>\r\n        </IconButton>\r\n      \r\n        <Drawer {...{\r\n            anchor: 'left',\r\n            open: toggleMenuOpen,\r\n            onClose: handleToggleMenuClose\r\n          }}\r\n        >\r\n\r\n          <div>{ getToggleMenuOptions() }</div>\r\n        </Drawer>\r\n      \r\n      </Toolbar>\r\n    );\r\n  }\r\n\r\n  const getToggleMenuOptions = () => {\r\n    return ( \r\n      <Box className={classes.mobileBox}>\r\n            {user?.result ? (\r\n               <div>\r\n                  <Button component={Link} to=\"/\" className={classes.mobileHeading}>Home</Button> \r\n                  <Button component={Link} to=\"/chat\" className={classes.mobileHeading}>Messenger</Button> \r\n                   <Divider style={{ marginBottom: '11px'}}/>\r\n                  <Typography className={classes.mobileHeading} variant=\"h6\">{user?.result.firstname}</Typography>\r\n                  <Button variant=\"contained\" style={{ display: 'flex', fontFamily: 'Segoe UI'}} color=\"secondary\" onClick={logout}>Logout</Button>\r\n              </div>\r\n            ):(\r\n                <div>\r\n                   <Button component={Link} to=\"/\" className={classes.mobileHeading}>Home</Button> \r\n                   <Button component={Link} to=\"/auth\" variant=\"contained\" color=\"primary\" style={{ fontFamily: 'Segoe UI'}}>Sign In</Button>\r\n                </div>\r\n            )}\r\n      </Box>\r\n    );\r\n  }\r\n\r\n  //desktop\r\n  const displayLargeMenu = () => {\r\n    return (\r\n      <Toolbar className={classes.toolbar}>\r\n           <Box className={classes.menuBox}>\r\n            <AcUnitIcon style={{ fontSize: '33px'}}/>\r\n            <Button component={Link} to=\"/\" className={classes.heading}>Home</Button> \r\n            {(user?.result)  && (           \r\n            <Button component={Link} to=\"/chat\" className={classes.heading}>Messenger</Button> \r\n            )}\r\n           </Box>\r\n\r\n          <Box className={classes.menuBox}>\r\n            <div className={classes.rightDiv}>\r\n                {user?.result ? \r\n                 (\r\n                  <div className={classes.profile}>\r\n                    <Avatar className={classes.avatar} alt={user?.result.firstname} src={user?.result.imageUrl}>{user?.result.firstname.charAt(0)}</Avatar>\r\n                    <Typography className={classes.userName} variant=\"h6\">{user?.result.firstname}</Typography>\r\n                    <Button variant=\"contained\" style={{ fontFamily: 'Segoe UI'}} color=\"secondary\" onClick={logout}>Logout</Button>\r\n                  </div>\r\n                    // <div>\r\n                    //     <Button component={Link} to=\"/chat\" className={classes.heading}>Messenger</Button> \r\n                    // </div>\r\n                ) : (\r\n                    <Button component={Link} to=\"/auth\" variant=\"contained\" color=\"primary\" style={{ fontFamily: 'Segoe UI'}}>Sign In</Button>\r\n                )} \r\n            </div>\r\n           \r\n          </Box>\r\n        </Toolbar>\r\n    );\r\n  }\r\n  \r\n  return (\r\n    <Container>\r\n      <AppBar> \r\n        { toggleMenu ? displayToggleMenu() : displayLargeMenu() }\r\n      </AppBar>\r\n    </Container>\r\n  );\r\n}","import { makeStyles } from '@material-ui/core/styles';\n\nexport default makeStyles((theme) => ({\n  paper: {\n    marginTop: theme.spacing(8),\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    padding: theme.spacing(2),\n  },\n  root: {\n    '& .MuiTextField-root': {\n      margin: theme.spacing(1),\n    },\n  },\n  avatar: {\n    margin: theme.spacing(1),\n    backgroundColor: theme.palette.secondary.main,\n  },\n  form: {\n    width: '100%', // Fix IE 11 issue.\n    marginTop: theme.spacing(3),\n  },\n  submit: {\n    margin: theme.spacing(3, 0, 2),\n  },\n  googleButton: {\n    marginBottom: theme.spacing(2),\n  },\n}));\n","import React from 'react';\nimport { TextField, Grid, InputAdornment, IconButton } from '@material-ui/core';\n\nimport Visibility from '@material-ui/icons/Visibility';\nimport VisibilityOff from '@material-ui/icons/VisibilityOff';\n\nconst Input = ({ name, handleChange, label, half, autoFocus, type, handleShowPassword }) => (\n  <Grid item xs={12} sm={half ? 6 : 12}>\n    <TextField\n      name={name}\n      onChange={handleChange}\n      variant=\"outlined\"\n      required\n      fullWidth\n      label={label}\n      autoFocus={autoFocus}\n      type={type}\n      InputProps={name === 'password' ? {\n        endAdornment: (\n          <InputAdornment position=\"end\">\n            <IconButton onClick={handleShowPassword}>\n              {type === 'password' ? <Visibility /> : <VisibilityOff />}\n            </IconButton>\n          </InputAdornment>\n        ),\n      } : null}\n    />\n  </Grid>\n);\n\nexport default Input;\n","import React, { useState } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { Avatar, Button, Paper, Grid, Typography, Container } from '@material-ui/core';\nimport { useHistory } from 'react-router-dom';\n// import { GoogleLogin } from 'react-google-login';\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\nimport { signin, signup } from '../../actions/auth';\nimport { AUTH } from '../../constants/actionTypes';\nimport useStyles from './styles';\nimport Input from './Input';\n\nconst initialState = { firstName: '', lastName: '', email: '', password: '', confirmPassword: '' };\n\nconst SignUp = () => {\n  const [form, setForm] = useState(initialState);\n  const [isSignup, setIsSignup] = useState(false);\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const classes = useStyles();\n\n  const [showPassword, setShowPassword] = useState(false);\n  const handleShowPassword = () => setShowPassword(!showPassword);\n\n  const switchMode = () => {\n    setForm(initialState);\n    setIsSignup((prevIsSignup) => !prevIsSignup);\n    setShowPassword(false);\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n\n    if (isSignup) {\n      dispatch(signup(form, history));\n    } else {\n      dispatch(signin(form, history));\n    }\n  };\n\n  const googleSuccess = async (res) => {\n    const result = res?.profileObj;\n    const token = res?.tokenId;\n\n    try {\n      dispatch({ type: AUTH, data: { result, token } });\n\n      history.push('/');\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  const googleError = () => alert('Google Sign In was unsuccessful. Try again later');\n\n  const handleChange = (e) => setForm({ ...form, [e.target.name]: e.target.value });\n\n  return (\n    <Container component=\"main\" maxWidth=\"xs\">\n      <Paper className={classes.paper} elevation={3}>\n        <Avatar className={classes.avatar}>\n          <LockOutlinedIcon />\n        </Avatar>\n        <Typography component=\"h1\" variant=\"h5\">{ isSignup ? 'Sign up' : 'Sign in' }</Typography>\n        <form className={classes.form} onSubmit={handleSubmit}>\n          <Grid container spacing={2}>\n            { isSignup && (\n            <>\n              <Input name=\"firstName\" label=\"Firstname\" handleChange={handleChange} autoFocus half />\n              <Input name=\"lastName\" label=\"Lastname\" handleChange={handleChange} half />\n            </>\n            )}\n            <Input name=\"email\" label=\"Email Address\" handleChange={handleChange} type=\"email\" />\n            <Input name=\"password\" label=\"Password\" handleChange={handleChange} type={showPassword ? 'text' : 'password'} handleShowPassword={handleShowPassword} />\n            { isSignup && <Input name=\"confirmPassword\" label=\"Repeat Password\" handleChange={handleChange} type=\"password\" /> }\n          </Grid>\n          <Button type=\"submit\" fullWidth variant=\"contained\" color=\"primary\" className={classes.submit}>\n            { isSignup ? 'Sign Up' : 'Sign In' }\n          </Button>\n          {/* <GoogleLogin\n            clientId=\"67355013266-7mehrhtmnqjdn9al2i76190hsjfc3dic.apps.googleusercontent.com\"\n            render={(renderProps) => (\n              <Button className={classes.googleButton} color=\"primary\" fullWidth onClick={renderProps.onClick} disabled={renderProps.disabled} startIcon={<Icon />} variant=\"contained\">\n                Google Sign In\n              </Button>\n            )}\n            onSuccess={googleSuccess}\n            onFailure={googleError}\n            cookiePolicy=\"single_host_origin\"\n          /> */}\n          <Grid container justify=\"flex-end\">\n            <Grid item>\n              <Button onClick={switchMode}>\n                { isSignup ? 'Already have an account? Sign in' : \"Don't have an account? Sign Up\" }\n              </Button>\n            </Grid>\n          </Grid>\n        </form>\n      </Paper>\n    </Container>\n  );\n};\n\nexport default SignUp;\n","import { AUTH } from '../constants/actionTypes';\nimport * as api from '../api/index.js';\n\nexport const signin = (formData, router) => async (dispatch) => {\n  try {\n    const { data } = await api.signIn(formData);\n\n    dispatch({ type: AUTH, data });\n\n    router.push('/posts');\n  } catch (error) {\n    console.log(error);\n  }\n};\n\nexport const signup = (formData, router) => async (dispatch) => {\n  try {\n    const { data } = await api.signUp(formData);\n\n    dispatch({ type: AUTH, data });\n\n    router.push('/');\n  } catch (error) {\n    console.log(error);\n  }\n};\n","import { FETCH_USERS, UPDATE } from '../constants/actionTypes';\r\nimport * as api from '../api/index.js';\r\n\r\nexport const getUsers = () => async (dispatch) => {\r\n    try {\r\n      const { data } = await api.fetchUsers();\r\n\r\n      dispatch({ type: FETCH_USERS, payload: data });\r\n    } catch(error) {\r\n        console.log(error);\r\n    }\r\n};\r\n\r\nexport const updateUser = (id, user) => async (dispatch) => {\r\n    try {\r\n       const { data } = await api.updateUser(id, user);\r\n       dispatch({ type: UPDATE, payload: data});\r\n     \r\n    }\r\n    catch (error) {\r\n        console.log(error);\r\n    }\r\n};","import { makeStyles } from '@material-ui/core/styles';\n\nexport default makeStyles((theme) => ({\n  paper: {\n    marginTop: theme.spacing(8),\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    padding: theme.spacing(2),\n  },\n  root: {\n    '& .MuiTextField-root': {\n      margin: theme.spacing(1),\n    },\n  },\n  avatar: {\n    margin: theme.spacing(1),\n    backgroundColor: theme.palette.secondary.main,\n  },\n  form: {\n    width: '100%', // Fix IE 11 issue.\n    marginTop: theme.spacing(3),\n  },\n  submit: {\n    margin: theme.spacing(3, 1, 2),\n    float: 'right'\n  },\n  googleButton: {\n    marginBottom: theme.spacing(2),\n  },\n}));\n","import React from 'react';\r\nimport { TextField, Grid } from '@material-ui/core';\r\n\r\nconst Input = ({ name, onChange, label, half, autoFocus, type, value }) => (\r\n    <Grid item xs={12} sm={half ? 6 : 12}>\r\n        <TextField \r\n          type={type}     \r\n          name={name}\r\n          defaultValue = {value}\r\n          onChange={onChange}          \r\n          variant=\"outlined\"\r\n          required\r\n          fullWidth       \r\n          label={label}\r\n          autoFocus={autoFocus}\r\n           \r\n        />\r\n    </Grid>\r\n);\r\n\r\nexport default Input;","import React, { useState } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport { Button, Paper, Grid, Typography, Container, Grow } from '@material-ui/core';\r\nimport { updateUser } from '../../actions/users';\r\nimport useStyles from './styles';\r\nimport Input from './Input';\r\n\r\nconst initialState = { firstname: '', lastname: '', email: '' };\r\n\r\nconst Profile = () => {\r\n    const [form, setForm] = useState(initialState);\r\n    const dispatch = useDispatch();\r\n    const classes = useStyles();\r\n    const user = JSON.parse(localStorage.getItem('profile'));\r\n\r\n    const currentUserId = user?.result?._id;\r\n    const email = user?.result?.email;\r\n    const firstname = user?.result?.firstname;\r\n    const lastname = user?.result?.lastname;\r\n\r\n    console.log('[PROFILE] currentUserId: ', currentUserId);\r\n    console.log('[PROFILE] handleSubmit/localStorage-email: ', email);\r\n    console.log('[PROFILE] handleSubmit/localStorage-firstname: ', firstname);\r\n    console.log('[PROFILE] handleSubmit/localStorage-lastname: ', lastname);\r\n  \r\n    const handleChange = (e) => setForm({ ...form, [e.target.name]: e.target.value });\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n\r\n        // dispatch(updateUser(currentUserId, {...form, firstName: user?.result?.firstname}));\r\n        dispatch(updateUser(currentUserId, form));\r\n    }\r\n\r\n    return(\r\n      <Grow in>    \r\n        <Container component=\"main\" maxWidth=\"xs\">\r\n        <Paper className={classes.paper} elevation={3}>\r\n\r\n          <Typography component=\"h1\" variant=\"h5\"> Update Profile </Typography>\r\n          <form className={classes.form} onSubmit={handleSubmit}>\r\n            <Grid container spacing={2}>      \r\n              <Input name=\"firstname\" label=\"Firstname\"  value={firstname} onChange={handleChange}  half />\r\n              <Input name=\"lastname\" label=\"Lastname\" value={lastname}  onChange={handleChange} half />                    \r\n              <Input name=\"email\" label=\"Email Address\" value={email}  onChange={handleChange} type=\"email\" />\r\n\r\n            </Grid>\r\n            <Button type=\"submit\" fullWidth variant=\"contained\" color=\"primary\" className={classes.submit}>\r\n              UPDATE\r\n            </Button>\r\n          </form>\r\n        </Paper>\r\n      </Container>\r\n      </Grow>\r\n    );\r\n};\r\n\r\nexport default Profile;","import { FETCH_MESSAGES, CREATE_MESSAGE, RESET_MESSAGES } from '../../constants/actionTypes';\r\nimport * as api from '../../api/index';\r\n// import history from '../../history';\r\n\r\nexport const getMessages = conversationId => async dispatch => {\r\n        // console.log('PAKI CHECK PO PLEASE: ', conversationId)\r\n    try {\r\n        const { data } = await api.fetchMessages(conversationId);\r\n\r\n        dispatch({ type: FETCH_MESSAGES, payload: data});\r\n       // history.push('/chat');\r\n\r\n    } catch (error) {\r\n        console.log('[ERROR]-redux-action-chat-message: ', error.name);\r\n    }\r\n};\r\n\r\nexport const createMessage = message => async dispatch => {\r\n    try {\r\n        const { data } = await api.createMessage(message);\r\n        dispatch({ type: CREATE_MESSAGE, payload: data});\r\n\r\n    } catch (error) {\r\n        console.log('action-createMessage error: ',error);\r\n    }\r\n};\r\n\r\nexport const resetMessages = () => async dispatch => {\r\n    try {\r\n\r\n        dispatch({ type: RESET_MESSAGES});\r\n\r\n    } catch (error) {\r\n        console.log(error);\r\n    }\r\n};\r\n\r\n\r\n\r\n","import { FETCH_CONVERSATION, SET_CONVERSATION_ID, SET_CONVERSATION_WITH, CREATE_CONVERSATION, CREATE_CONVERSATION_AND_MESSAGE, RESET_CONVERSATION_DATA } from '../../constants/actionTypes';\r\nimport * as api from '../../api/index';\r\n\r\nexport const resetConversationData  = () => async dispatch => {\r\n    try {\r\n\r\n        dispatch({ type: RESET_CONVERSATION_DATA});\r\n\r\n    } catch (error) {\r\n        console.log(error);\r\n    }\r\n\r\n};\r\n\r\nexport const getConversation = (userId) => async (dispatch) => {\r\n    \r\n    try {\r\n        const { data } = await api.fetchConversation(userId);\r\n  \r\n        dispatch({ type: FETCH_CONVERSATION, payload: data});\r\n\r\n    } catch (error) {\r\n        console.log('[ERROR][REDUX-ACTION-GET-CONVERSATION]', error.name);\r\n    }\r\n};\r\n\r\nexport const createConversation = (conversation) => async (dispatch) => {\r\n\r\n    try {\r\n        const { data } = await api.createConversation(conversation);\r\n\r\n        dispatch({ type: CREATE_CONVERSATION, payload: data })\r\n\r\n    } catch (error) {\r\n        console.log('[ERROR][REDUX-ACTION-CREATE-CONVERSATION]', error.name);\r\n    }\r\n\r\n}\r\nexport const createConversationAndMessage = (conversationAndMessage) => async (dispatch) => {\r\n        // console.log('redux/action: conversationAndMessage <outside-try>: ', conversationAndMessage);\r\n    try {\r\n        const { data } = await api.createConversationAndMessage(conversationAndMessage);\r\n\r\n        // console.log('redux/action: conversationAndMessage <inside-try> : newly generated conversation ID: ', data._id)\r\n        dispatch({ type: CREATE_CONVERSATION_AND_MESSAGE, payload: data })\r\n\r\n    } catch (error) {\r\n        console.log('[ERROR][REDUX-ACTION-CREATE-CONVERSATION-AND-MESSAGE]', error.name);\r\n    }\r\n\r\n}\r\n\r\nexport const setConversationId = (payload) =>  {\r\n    return {\r\n        type: SET_CONVERSATION_ID,\r\n        payload\r\n    }\r\n};\r\n\r\nexport const setConversationWith = (payload) => {\r\n    return {\r\n        type: SET_CONVERSATION_WITH,\r\n        payload\r\n    }\r\n}\r\n\r\n\r\n","import io from \"socket.io-client\";\r\nexport const socket = io('localhost:5555');","import { CircularProgress, Link, Grid, Paper, Typography } from '@material-ui/core';\r\nimport { deepPurple } from '@material-ui/core/colors';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport React, { useEffect, useState, useRef } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { getMessages } from '../../actions/chat/message';\r\nimport { getConversation } from '../../actions/chat/conversation';\r\nimport { setConversationId, setConversationWith } from '../../actions/chat/conversation';\r\nimport MessageIcon from '@material-ui/icons/Message';\r\nimport { socket } from '../../service/socket';\r\n\r\n\r\nconst useStyles = makeStyles({\r\n\r\n    mainContainer: {\r\n      overflowY: 'auto',\r\n      backgroundColor: '#FFFFFF',\r\n      padding: '11px 11px 11px 11px'\r\n    },\r\n    purple: {\r\n      backgroundColor: deepPurple[500],\r\n    },\r\n    Label: {\r\n      fontWeight: 'bold',\r\n      display: 'flex',\r\n      fontFamily: 'Segoe UI',\r\n      paddingBottom: '9px'\r\n\r\n    },\r\n    UserContent: {\r\n      display: 'flex',\r\n      fontWeight: 'bold',\r\n      fontFamily: 'Segoe UI',\r\n      paddingLeft: '9px'\r\n  },\r\n  \r\n  });\r\n\r\nconst Conversation = () => {\r\n\r\n    const classes = useStyles();\r\n    const dispatch = useDispatch();\r\n    const conversation = useSelector((state) => state.conversations);\r\n    const conversation_data = useSelector((state) => state.conversation_data);\r\n    const user = JSON.parse(localStorage.getItem('profile'));\r\n    const userId = user?.result?._id;\r\n    const conversationId = conversation_data?.conversation_id; \r\n    const [conversationData, setConversationData] = useState({ conversation_id: '', conversation_name: ''});\r\n\r\n    useEffect(() => {\r\n      if(conversationData.conversation_id !== '' || conversationData.conversation_id.length !== 0 || conversationData.conversation_id !== '') {\r\n        dispatch(getMessages(conversationData.conversation_id));\r\n\r\n        dispatch(setConversationId({ conversation_id: conversationData.conversation_id, conversation_name: conversationData.conversation_name }));\r\n        dispatch(setConversationWith(conversation.name));\r\n\r\n      }\r\n\r\n    },[conversationData]);\r\n\r\n         let fuck =  conversation[conversation.length - 1] // get the latest generated ID\r\n         let fucking = `\"${JSON.stringify(fuck)}\"`;\r\n         let awts = fucking.split(',');\r\n\r\n         { awts.map((d) => {\r\n          // console.log('withQoute: ', d)\r\n           let removeQoute = d.replace(/['\"]+/g, '')\r\n          //  console.log('removeQoute: ', removeQoute)\r\n\r\n            if(removeQoute.includes('_id') === true) {\r\n           \r\n              let finalResult = removeQoute.split(\"_id:\").pop();\r\n              // console.log('create a logic that will handle this: ', conversation_data.conversation_with );\r\n             \r\n              // if conversation_data.conversation_with !== undefined\r\n              if(conversation_data.conversation_with !== undefined) {\r\n                // dispatch(getMessages(finalResult));\r\n         \r\n              }\r\n    \r\n            }\r\n        })}\r\n\r\n        /////\r\n\r\n      ///\r\n\r\n\r\n    const [updatingFlag, setUpdatingFlag] = useState(0);\r\n\r\n    useEffect(() => {\r\n\r\n        // console.log('Conversation useEffect');\r\n\r\n        if(updatingFlag !== 0) {\r\n            socket.on('updateMessage', (data) => {\r\n              console.log('[CONVERSATION] : socket.on.updateMessage', data);\r\n              setUpdatingFlag(data.updatingFlag);\r\n            });\r\n        \r\n            socket.on('updateConversation', (data) => {\r\n              console.log('Conversation useEffect updateConversation-data: ', data);\r\n              setUpdatingFlag(data.updatingFlag);\r\n            });\r\n\r\n        }\r\n        dispatch(getConversation(userId));\r\n\r\n        console.log('[CONVERSATION]-->')\r\n        socket.on('updateMessage', (data) => {\r\n          console.log('[CONVERSATION] : socket.on.updateMessage', data);\r\n          setUpdatingFlag(data.updatingFlag);\r\n        });\r\n        console.log('[CONVERSATION]--|')\r\n\r\n        if(conversationData.conversation_id !== '') {\r\n          dispatch(getMessages(conversationData.conversation_id));\r\n        }\r\n  \r\n    },[updatingFlag]);\r\n\r\n    const handleClick = data => {\r\n\r\n      //add event here auto click when conversation\r\n      if(conversationId !== 0 || conversationId.length !== 0 || conversationId !== undefined) {\r\n        setConversationData({...conversationData, ...data});\r\n\r\n      }\r\n    }\r\n\r\n    const inputRef = useRef(null)\r\n\r\n    useEffect(() => {\r\n        //add validation here so it will nto always click, just click when the inbox is belongs to him/her\r\n      if(inputRef.current !== null){\r\n        inputRef.current.click();\r\n        console.log('inputRef invoked click(): ', inputRef.current)\r\n      }\r\n       \r\n    }, [conversation])\r\n    \r\n\r\n    return(\r\n           !conversation?.length ? <CircularProgress /> : (       \r\n                  <Grid container className={classes.mainContainer} component={Paper} >\r\n                    <Typography className={classes.Label}> INBOX </Typography> \r\n                        {conversation.map((conversation) => (\r\n                          <Grid key={conversation._id} container item lg={12} md={12} sm={12}>\r\n                               <MessageIcon/> \r\n                               <Link  ref={inputRef} key={conversation.conversation_id} component=\"button\" onClick={() => handleClick({conversation_id: conversation._id, conversation_name: conversation.name})}>                              \r\n                                <Typography className={classes.UserContent}>{conversation.name}</Typography>\r\n                              </Link>\r\n                          </Grid> \r\n\r\n                        ))}            \r\n                  </Grid>)\r\n    );\r\n};\r\n\r\nexport default Conversation;","import React, { useEffect, useState } from 'react';\r\nimport { Typography, Grid } from '@material-ui/core';\r\nimport './Messages.css';\r\n// import io from 'socket.io-client';\r\n\r\nconst Messages = ({ message }) => {\r\n    // console.log('[Messages] Rendered: ');\r\n    const [justifyContentVal, setJustifyContentVal] = useState(\"\");\r\n    const [backgroundColor, setBackgroundColor] = useState({ color: ''});\r\n    const user = JSON.parse(localStorage.getItem('profile'));\r\n\r\n    let currentUser = user?.result?._id;\r\n\r\n\r\n    useEffect(() => {\r\n\r\n        if(message.owner === currentUser) {\r\n            setJustifyContentVal('flex-start');\r\n            setBackgroundColor({...backgroundColor, color: '#2534da'});\r\n        } else {\r\n            setJustifyContentVal('flex-end');\r\n            setBackgroundColor({...backgroundColor, color: '#61658f'});\r\n        }\r\n\r\n    },[message]);\r\n\r\n    return (\r\n        <Grid style={{ display: \"flex\", justifyContent: justifyContentVal }} item xs={12} sm={12} md={12}>    \r\n            <Typography className=\"messageBox\" style={{ background: backgroundColor.color, fontFamily: 'Segoe UI', margin: '1px 3px 1px 3px' }}>\r\n                    {message.content}\r\n            </Typography>\r\n        </Grid>\r\n    );\r\n}\r\n\r\nexport default Messages;","import { Typography, Grid } from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { getMessages } from '../../actions/chat/message';\r\nimport { getConversation } from '../../actions/chat/conversation';\r\nimport Messages from './Messages.js';\r\nimport ReactScrollableFeed from 'react-scrollable-feed';\r\nimport io from 'socket.io-client';\r\n\r\nconst useStyles = makeStyles({\r\n  \r\n    scrollFeed: {\r\n      height: 300,\r\n      backgroundColor: '#e0e0e0'\r\n    },\r\n    Label: {\r\n      fontWeight: 'bold',\r\n      fontFamily: 'Segoe UI',\r\n      display: 'flex',\r\n      padding: '11px 11px 11px 11px'\r\n    }\r\n\r\n  \r\n  });\r\n\r\n  let socket = io('localhost:5555');\r\n\r\nconst Message = () => {\r\n    const classes = useStyles();\r\n    const dispatch = useDispatch();\r\n    const messages = useSelector((state) => state.messages);\r\n\r\n    const conversation_data = useSelector((state) => state.conversation_data);\r\n\r\n    const user = JSON.parse(localStorage.getItem('profile'));\r\n    const userId = user?.result?._id;\r\n\r\n    useEffect(() => {\r\n        if(conversation_data.conversation_id !== undefined) {\r\n            dispatch(getMessages(conversation_data.conversation_id));\r\n        }\r\n\r\n    },[]);\r\n\r\n    const [typing, SetTyping] = useState();\r\n\r\n    useEffect(() => {\r\n            socket.on('typing-activated', data => {\r\n            SetTyping(data);\r\n            // console.log('[MESSAGE] socket.on.typing-activated-data: ', data);\r\n            })\r\n    },[typing])\r\n\r\n    const [emitMessageRespond, setEmitMessageRespond] = useState(0);\r\n\r\n    useEffect(() => {\r\n\r\n        //the syntax below is one-time-run only, when user dont have conversation/message yet (he's newly registerred user) -->\r\n        if(conversation_data.conversation_id === undefined) {\r\n          dispatch(getConversation(userId));\r\n      \r\n        }\r\n        // ------|\r\n\r\n        //the syntax below is already has the conversation and just appending messages -->\r\n        if(conversation_data.conversation_id !== undefined) {\r\n          dispatch(getMessages(conversation_data.conversation_id));\r\n\r\n\r\n          }\r\n        // ------|\r\n\r\n      socket.on('updateMessage', data => {\r\n        console.log('[Message]: socket-on-updateMessage ', data);\r\n        // console.log('[Message] Rendered: pleasepleasepleaseplease ', data, '\\n','messages: ', messages);\r\n        setEmitMessageRespond(data);\r\n    });\r\n\r\n    }, [emitMessageRespond])\r\n\r\n    //30-05-->\r\n    const [conversationData, setConversationData] = useState({ conversation_id: '', conversation_name: ''});\r\n\r\n    useEffect(() => {\r\n\r\n      // console.log('new useEffect: ', conversationData.conversation_id)\r\n\r\n      if(conversationData.conversation_id !== '' || conversationData.conversation_id.length !== 0 || conversationData.conversation_id !== '') {\r\n        dispatch(getMessages(conversationData.conversation_id));\r\n\r\n        // dispatch(setConversationId({ conversation_id: conversationData.conversation_id, conversation_name: conversationData.conversation_name }));\r\n        // dispatch(setConversationWith(conversation.name));\r\n\r\n      }\r\n\r\n    },[conversationData]);\r\n\r\n    //30-05--|\r\n\r\n\r\n    return(\r\n        <>\r\n          <Typography className={classes.Label}> \r\n            CONVERSATION WITH : &nbsp;&nbsp; \r\n    \r\n            {!conversation_data?.conversation_with?.name?.length \r\n                ? conversation_data.conversation_name \r\n                : conversation_data?.conversation_with?.name\r\n            }\r\n            </Typography>\r\n    \r\n              <ReactScrollableFeed className={classes.scrollFeed}>\r\n                    {messages.map((message) => (\r\n                        <Grid key={message._id} container item xs={12} sm={12} md={12}>\r\n                            <Messages message={message}/>\r\n                        </Grid>\r\n                    ))}          \r\n              </ReactScrollableFeed>\r\n      \r\n          {/* {!messages?.length ? <CircularProgress /> : (\r\n              <ReactScrollableFeed className={classes.scrollFeed}>\r\n                    {messages.map((message) => (\r\n                        <Grid key={message._id} container item xs={12} sm={12} md={12}>\r\n                            <Messages message={message}/>\r\n                        </Grid>\r\n                    ))}          \r\n                </ReactScrollableFeed>\r\n          )} */}\r\n        </>\r\n    );\r\n}\r\n\r\nexport default Message;","import React, { useEffect, useState } from 'react';\r\nimport { CircularProgress, Grid, Paper, Typography, Link, Button, Box } from '@material-ui/core';\r\nimport MoreHorizIcon from '@material-ui/icons/MoreHoriz';\r\nimport { getUsers } from '../../actions/users';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { setConversationWith, resetConversationData } from '../../actions/chat/conversation'\r\nimport {  resetMessages } from '../../actions/chat/message'\r\n\r\nconst useStyles = makeStyles({\r\n    mainContainer: {\r\n      display: 'flex',\r\n      flexDirection: 'column',\r\n      overflowY: 'auto',\r\n      backgroundColor: '#FFFFFF',\r\n      padding: '11px 11px 11px 11px'\r\n    },\r\n    userLink: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'space-between',\r\n        padding: '3px 3px 3px 3px',\r\n        height: '33px'\r\n    },\r\n    Label: {\r\n        display: 'flex',\r\n        fontWeight: 'bold',\r\n        fontFamily: 'Segoe UI',\r\n        paddingBottom: '9px'\r\n    },\r\n    UserContent: {\r\n        display: 'flex',\r\n        fontWeight: 'bold',\r\n        fontFamily: 'Segoe UI',\r\n        paddingLeft: '9px'\r\n    },\r\n\r\n  });\r\n\r\n\r\nconst UserList = () => {\r\n    // console.log('[UserList] Rendered: ');\r\n    const classes = useStyles();\r\n    const dispatch = useDispatch();\r\n    const userlist = useSelector((state) => state.users)\r\n    const conversation_data = useSelector(state => state.conversation_data)\r\n\r\n    useEffect(() => {\r\n        dispatch(getUsers());\r\n    },[]);\r\n\r\n    const [participants, setParticipants] = useState({ name: '', id: ''});\r\n\r\n\r\n     useEffect(() => {\r\n         if(participants.length !== 0 || participants !== undefined) {\r\n            //REDUX: Reset the conversation_data when clicking on userlist\r\n            //this reset must go 1st.\r\n            //TODO/TOASK: refactor => w/c is more optimized. reset the whole objects or modify/set the specific props/field *Performance\r\n            dispatch(resetConversationData());\r\n\r\n\r\n            dispatch(setConversationWith(participants));\r\n            dispatch(resetMessages());\r\n           //todo: check if the participants has conversation if null reset the message component into new OR =>\r\n           //optimize userList => show only the user that has no conversation at all to current user logged in\r\n\r\n\r\n         }\r\n\r\n\r\n\r\n     },[participants])\r\n\r\n    return (        \r\n        !userlist?.length ? <CircularProgress /> : (                        \r\n                    <Grid container className={classes.mainContainer} component={Paper} >\r\n                        <Typography className={classes.Label}>USER LIST</Typography> \r\n                        {userlist.map((user) => (\r\n                            <Link key={user._id} className={classes.userLink} component={Paper} elevation={9} onClick={() => setParticipants({name: user.firstname, id: user._id})}>\r\n                              <Button className={classes.UserContent}> { user.firstname }  </Button>  \r\n                                <Button style={{ color: 'black' }} size=\"small\">\r\n                                    <MoreHorizIcon fontSize=\"default\" />\r\n                                </Button>       \r\n                          \r\n                            </Link>       \r\n                        ))}            \r\n                    </Grid>              \r\n            )\r\n    );\r\n}\r\n\r\nexport default UserList","import React, { useState, useEffect} from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Button, TextField, Box, Paper } from '@material-ui/core';\r\nimport { createMessage } from '../../actions/chat/message';\r\nimport { createConversationAndMessage } from '../../actions/chat/conversation';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport io from 'socket.io-client';\r\n\r\nlet socket = io('localhost:5555');\r\n\r\nconst useStyles = makeStyles({\r\n\r\n    Box: {\r\n      display: 'flex',\r\n      justifyContent: 'space-around',\r\n      margin: '3px 3px 3px 3px',\r\n    },\r\n    \r\n    messageTextfield : {\r\n      display: 'flex',\r\n      margin: '22px 11px 11px 11px'\r\n  },\r\n    sendButton : {\r\n      display: 'flex',\r\n      margin: '3px 3px 3px 3px',\r\n      fontFamily: 'Segoe UI',\r\n\r\n    },\r\n\r\n\r\n  });\r\n\r\nconst Input = () => {\r\n\r\n    const classes = useStyles();\r\n    const dispatch = useDispatch();\r\n    const user = JSON.parse(localStorage.getItem('profile'));\r\n    const userId = user?.result?._id;\r\n    const conversation_data = useSelector((state) => state.conversation_data);\r\n    const [messsageData, setMessageData] = useState({ owner: '', conversationId : '', content: ''});\r\n    const [keyPressCount, setKeyPressCount] = useState(0);\r\n    \r\n    //TODO: change this code into const var, useState no need\r\n     const [conAndMsgData] = useState({\r\n      conversation:{\r\n        participants: [], name: '', lastMessageId: 333\r\n      },\r\n      messages: {\r\n        owner: '', conversationId : '', content: ''\r\n      }\r\n     })\r\n    //  console.log('[Input] Rendered: ',conversation_data);\r\n     const [myMessage, setMyMessage] = useState('');\r\n     const conversationId = conversation_data?.conversation_id; \r\n\r\n     const clear = () => {\r\n      setMyMessage('');\r\n     }\r\n  \r\n    const handleMessage = async message => {\r\n        if(conversation_data.conversation_with === undefined) {\r\n          setMessageData({ ...messsageData, content: message })     \r\n          setMyMessage(prev => message);\r\n          // console.log('myMessagemyMessagemyMessage ', myMessage);\r\n        } else {\r\n          setMyMessage(message);\r\n      \r\n        }\r\n      };\r\n\r\n      const handleSubmit =  (e) => {\r\n        e.preventDefault();\r\n        clear();\r\n\r\n       if(conversation_data?.conversation_with === undefined) {\r\n\r\n          dispatch(createMessage({...messsageData, owner: userId, conversationId: conversation_data?.conversation_id}));\r\n       \r\n           socket.emit('sendMessage', { type: 'message' }, () => {\r\n                  // console.log('[CHAT]: socket.io. emit/sendMessage');\r\n            });\r\n\r\n       } else if (conversation_data?.conversation_with !== undefined) {\r\n\r\n         dispatch(createConversationAndMessage(\r\n           {...conAndMsgData,  \r\n\r\n              conversation: {\r\n                participants: [userId, conversation_data?.conversation_with?.id], \r\n                name: `${conversation_data?.conversation_with?.name}`\r\n              },\r\n              messages: {\r\n                  owner: userId,\r\n                  content: myMessage\r\n              } \r\n           }\r\n          \r\n          ));\r\n\r\n            // create logic: add send_message_type: there are 2 types:\r\n            // 1: update conversation and message \r\n            // 2: message only\r\n           socket.emit('sendMessage', {type: 'conversation-message'});\r\n\r\n       } else {\r\n         console.log('[CHAT]: do nothing...')\r\n       }\r\n\r\n  };\r\n\r\n\r\n    const handleKeyPress = () => {\r\n\r\n      //when user is typing store the number of keypress in let as counter and use that let on logics ahead\r\n      //avoid the enter key here\r\n       setKeyPressCount(prev => prev + 1);\r\n\r\n      // console.log('[INPUT] handleKeyPress: ', keyPressCount);\r\n\r\n      socket.emit('typing', { userId: userId, conversationId: conversationId });\r\n\r\n      socket.on('typing-activated', data => {\r\n        // console.log('server response: ', data);\r\n      })\r\n    }\r\n\r\n    return (\r\n            <form autoComplete=\"off\" noValidate onSubmit={handleSubmit}>\r\n              <Box className={classes.Box} component={Paper}>\r\n              <TextField \r\n                    className={classes.messageTextfield} \r\n                    name=\"message\"\r\n                    variant=\"outlined\" \r\n                    label=\"Send Message...\"\r\n                    fullWidth multiline rows={2} \r\n                    onChange={(e) => handleMessage(e.target.value)}\r\n                    onKeyPress={handleKeyPress}\r\n                    value={myMessage}\r\n                />\r\n                <Button type=\"submit\" className={classes.sendButton} color=\"primary\" variant=\"contained\"> Send </Button>\r\n              </Box>\r\n\r\n            </form>\r\n    )\r\n};\r\n\r\nexport default Input;","import { Grid, Grow, Container, Paper } from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport React, { useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport Conversation from './Conversation';\r\nimport Message from './Message';\r\nimport { getConversation } from '../../actions/chat/conversation';\r\nimport UserList from './../User/UserList';\r\nimport Input from './Input';\r\n\r\nconst useStyles = makeStyles({\r\n\r\n  messageBody: {\r\n    padding: 10,\r\n  },\r\n  controller: {\r\n    padding: 10,\r\n  },\r\n \r\n  messageTextfield : {\r\n    margin: '22px 11px 11px 11px'\r\n  },\r\n  messagePaper : {\r\n    paddingTop: 30\r\n  },\r\n  container: {\r\n    display: 'flex',\r\n    flexDirection: 'row'\r\n  },\r\n  padding: {\r\n    padding: '9px 9px 9px 9px'\r\n  }\r\n\r\n});\r\n    \r\nconst Chat = () => {\r\n\r\n    const classes = useStyles();\r\n    const user = JSON.parse(localStorage.getItem('profile'));\r\n    const userId = user?.result?._id;\r\n\r\n    const dispatch = useDispatch();\r\n \r\n    useEffect(() => {\r\n        dispatch(getConversation(userId));\r\n    },[]);\r\n\r\n  return (\r\n    <Grow in>\r\n    <Container>\r\n        <Grid className={classes.container} container>\r\n           <Grid item xs={12} sm={12} md={12} lg={4} className={classes.padding} elevation={12} >\r\n                <UserList/>\r\n           </Grid>\r\n\r\n           <Grid item xs={12} sm={12} md={12} lg={4}  className={classes.padding} elevation={12} >\r\n                <Conversation /> \r\n           </Grid>\r\n\r\n           <Grid item xs={12} sm={12} md={12} lg={4} className={classes.controller} component={Paper} elevation={12} >\r\n \r\n                {/* {conversation !== null ? <Message /> : null} */}\r\n                <Message /> \r\n                <Input />\r\n            </Grid>\r\n          </Grid>\r\n      </Container>\r\n      </Grow>\r\n  );\r\n}\r\n\r\nexport default Chat;","import { makeStyles } from '@material-ui/core/styles';\r\n\r\nexport default makeStyles((theme) => ({\r\n  media: {\r\n    borderRadius: '20px',\r\n    objectFit: 'cover',\r\n    width: '100%',\r\n    maxHeight: '600px',\r\n\r\n  },\r\n  card: {\r\n    display: 'flex',\r\n    width: '100%',\r\n    [theme.breakpoints.down('sm')]: {\r\n      flexWrap: 'wrap',\r\n      flexDirection: 'column',\r\n    },\r\n  },\r\n  section: {\r\n    borderRadius: '20px',\r\n    margin: '10px',\r\n    flex: 1,\r\n  },\r\n  imageSection: {\r\n    marginLeft: '20px',\r\n    [theme.breakpoints.down('sm')]: {\r\n      marginLeft: 0,\r\n    },\r\n  },\r\n  recommendedPosts: {\r\n    display: 'flex',\r\n    [theme.breakpoints.down('sm')]: {\r\n      flexDirection: 'column',\r\n    },\r\n  },\r\n  loadingPaper: {\r\n    display: 'flex', justifyContent: 'center', alignItems: 'center', padding: '20px', borderRadius: '15px', height: '39vh',\r\n  },\r\n}));","import React, { useEffect } from 'react';\r\nimport { Paper, Typography, CircularProgress, Divider } from '@material-ui/core';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport moment from 'moment';\r\nimport { useParams, useHistory } from 'react-router-dom';\r\nimport useStyles from './styles';\r\nimport { getPost, getPostsBySearch } from '../../actions/posts';\r\n\r\nconst PostDetails = () => {\r\n    const { post, posts, isLoading } = useSelector((state) => state.posts);\r\n    const dispatch = useDispatch();\r\n    const history = useHistory();\r\n    const classes = useStyles();\r\n    const { id } = useParams();\r\n\r\n    useEffect(() => {\r\n        dispatch(getPost(id))\r\n    },[id])\r\n\r\n    useEffect(() => {\r\n        if(post) {\r\n            // search is none because we are not looking for search, we are only looking for tags, thats what were going to use to recommend the post\r\n            dispatch(getPostsBySearch({ search: 'none', tags: post?.tags.join(',') }));\r\n        }\r\n    }, [post])\r\n\r\n    //check the post and isLoading, before rendering on bottom return\r\n    if(!post) return null;\r\n\r\n    if(isLoading) {\r\n        return <Paper elevation={6} className={classes.loadingPaper}>\r\n            <CircularProgress size=\"7em\" />\r\n        </Paper>\r\n    }\r\n\r\n    const recommendedPosts = posts.filter(({ _id }) => _id !== post._id);\r\n    const openPost = (_id) => history.push(`/posts/${_id}`);\r\n\r\n    return (\r\n        <Paper style={{ padding: '20px', borderRadius: '15px' }} elevation={6}>\r\n            <div className={classes.card}>\r\n                <div className={classes.section}>\r\n                <Typography variant=\"h3\" component=\"h2\">{post.title}</Typography>\r\n                <Typography gutterBottom variant=\"h6\" color=\"textSecondary\" component=\"h2\">{post.tags.map((tag) => `#${tag} `)}</Typography>\r\n                <Typography gutterBottom variant=\"body1\" component=\"p\">{post.message}</Typography>\r\n                <Typography variant=\"h6\">Created by: {post.name}</Typography>\r\n                <Typography variant=\"body1\">{moment(post.createdAt).fromNow()}</Typography>\r\n                <Divider style={{ margin: '20px 0' }} />\r\n                <Typography variant=\"body1\"><strong>Realtime Chat - coming soon!</strong></Typography>\r\n                <Divider style={{ margin: '20px 0' }} />\r\n                <Typography variant=\"body1\"><strong>Comments - coming soon!</strong></Typography>\r\n                <Divider style={{ margin: '20px 0' }} />\r\n                </div>\r\n                <div className={classes.imageSection}>\r\n                <img className={classes.media} src={post.selectedFile || 'https://user-images.githubusercontent.com/194400/49531010-48dad180-f8b1-11e8-8d89-1e61320e1d82.png'} alt={post.title} />\r\n                </div>\r\n            </div>\r\n            {recommendedPosts.length && (\r\n                <div className={classes.section}>\r\n                    <Typography gutterBottom variant=\"h5\">You might also like</Typography>\r\n                    <Divider />\r\n                    <div className={classes.recommendedPosts}>\r\n                    {recommendedPosts.map(({ title, message, name, likes, selectedFile, _id}) => (\r\n                        <div style={{ margin: '20px', cursor: 'pointer'}} onClick={() => openPost(_id)} key={_id}>\r\n                            <Typography gutterBottom variant=\"h6\">{title}</Typography>\r\n                            <Typography gutterBottom variant=\"subtitle2\">{name}</Typography>\r\n                            <Typography gutterBottom variant=\"subtitle2\">{message}</Typography>\r\n                            <Typography gutterBottom variant=\"subtitle1\">Likes: {likes.length}</Typography>\r\n                            <img src={selectedFile} width=\"200px\" />\r\n                        </div>\r\n                    ))}\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </Paper>\r\n    )\r\n}\r\n\r\nexport default PostDetails;","import React from 'react';\nimport { Container } from '@material-ui/core';\nimport { BrowserRouter, Switch, Route, Redirect } from 'react-router-dom';\nimport Home from './components/Home/Home';\nimport NavigationBar from './components/Navbar/NavigationBar';\nimport Auth from './components/Auth/Auth';\nimport Profile from './components/User/Profile';\nimport Chat from './components/Chat/Chat';\nimport PostDetails from './components/PostDetails/PostDetails';\n\nconst App = () => {\n\n  const user = JSON.parse(localStorage.getItem('profile'));\n  // console.log('[App] user: ', user);\n\n  return (\n        <BrowserRouter>\n        <NavigationBar />\n        <Container maxWidth=\"xl\" style={{ marginTop: '99px'}}> \n          <Switch>\n            <Route path=\"/\" exact component={() => <Redirect to=\"/posts\" />} />\n            <Route path=\"/posts\" exact component={Home}/>\n            <Route path=\"/posts/search\" exact component={Home}/>\n            <Route path=\"/posts/:id\"  component={PostDetails}/>\n            <Route path=\"/chat\" exact component={Chat} />\n            <Route path=\"/auth\" exact component={() => (user === null ? <Auth /> : <Redirect to=\"/posts\" />)} />\n            <Route path=\"/user/profile\" exact component={Profile}/>\n          </Switch>\n        </Container>\n      </BrowserRouter>\n  );\n}\n\n\n\nexport default App;\n","import * as actionType from '../constants/actionTypes';\n\nconst authReducer = (state = { authData: null }, action) => {\n  switch (action.type) {\n    case actionType.AUTH:\n      localStorage.setItem('profile', JSON.stringify({ ...action?.data }));\n\n      return { ...state, authData: action.data, loading: false, errors: null };\n    case actionType.LOGOUT:\n      localStorage.clear();\n\n      return { ...state, authData: null, loading: false, errors: null };\n    default:\n      return state;\n  }\n};\n\nexport default authReducer;\n","import { combineReducers } from 'redux';\nimport authReducer from './auth.js';\nimport conversationsReducer from './chat/conversations.js';\nimport messagesReducer from './chat/messages.js';\nimport postsReducer from './posts.js';\nimport usersReducer from './users.js';\n\nimport conversationIdReducer from './chat/conversations-conversation-id.js';\n\nexport default combineReducers({ \n    auth: authReducer,\n    conversations: conversationsReducer,\n    conversation_data: conversationIdReducer,\n    messages: messagesReducer,\n    posts: postsReducer,\n    users: usersReducer\n\n});\n","import { FETCH_CONVERSATION, LOGOUT } from '../../constants/actionTypes';\r\n\r\nexport default (conversations = [], action) => {\r\n    switch (action.type) {\r\n      case FETCH_CONVERSATION: \r\n         return action.payload;\r\n      case LOGOUT:\r\n        return conversations = [];\r\n\r\n      default:\r\n        return conversations;\r\n    }\r\n  };\r\n  ","import {  SET_CONVERSATION_ID, LOGOUT, SET_CONVERSATION_WITH, RESET_CONVERSATION_DATA } from '../../constants/actionTypes';\r\n\r\nexport default (conversation_data = [], action) => {\r\n    switch (action.type) {\r\n        case SET_CONVERSATION_ID:\r\n            return action.payload\r\n        case SET_CONVERSATION_WITH:\r\n            // console.log('SET_CONVERSATION_WITH::::::: ', conversation_data, '   ', action)\r\n            return {...conversation_data, conversation_with: action.payload}\r\n        case RESET_CONVERSATION_DATA:\r\n            // console.log('RESET_CONVERSATION_DATA::::::: ', conversation_data, '   ', action)\r\n            return conversation_data = []\r\n        case LOGOUT:\r\n            return conversation_data = []\r\n      default:\r\n        return conversation_data;\r\n    }\r\n  };\r\n  ","import { FETCH_MESSAGES, LOGOUT, RESET_MESSAGES } from '../../constants/actionTypes';\r\n\r\nexport default (messages = [], action) => {\r\n    switch (action.type) {\r\n      case FETCH_MESSAGES:\r\n        return action.payload;\r\n      case RESET_MESSAGES:\r\n        return messages = [];\r\n      case LOGOUT:\r\n        return messages = [];\r\n      default:\r\n        return messages;\r\n    }\r\n  };","import _ from 'lodash';\nimport { FETCH_POSTS, FETCH, CREATE, UPDATE, DELETE, LIKE , LOGOUT, FETCH_BY_SEARCH, START_LOADING, END_LOADING } from '../constants/actionTypes';\n\nexport default (state = { isLoading: true, posts: []}, action) => {\n  //console.log('client/src/reducers/chat/posts/action.payload: ', action.payload,'\\n','client/src/reducers/chat/posts/posts: ', posts);\n  switch (action.type) {\n\n    case START_LOADING: \n      return {...state, isLoading: true }\n\n    case END_LOADING: \n      return {...state, isLoading: false }\n    case FETCH:\n      return { ...state, post: action.payload};\n\n    case FETCH_POSTS:\n      return {\n        ...state,\n        posts: action.payload.data,\n        currentPage: action.payload.currentPage,\n        numberOfPages: action.payload.numberOfPages\n      }\n\n    case FETCH_BY_SEARCH:\n        return { ...state, posts: action.payload};\n\n    case LIKE:\n      return { ... state, posts: state.posts.map((post) => (post._id === action.payload._id ? action.payload : post))};\n    case CREATE:\n      return { ...state, posts: [...state.posts, action.payload]};\n    case UPDATE:\n      return { ...state, posts: state.posts.map((post) => (post._id === action.payload._id ? action.payload : post))};\n    case DELETE:\n      return { ...state, posts: state.posts.filter((post) => post._id !== action.payload)};\n\n    case LOGOUT:\n        return state;\n\n    default:\n      return state;\n  }\n};\n\n","import { UPDATE, FETCH_USERS } from '../constants/actionTypes';\r\n\r\nexport default (users = [], action) => {\r\n   // console.log('client/src/reducers/chat/users action.payload: ', action.payload,'\\n','client/src/reducers/chat/users/users: ', users);\r\n    switch (action.type) {\r\n        case FETCH_USERS:\r\n            return action.payload;        \r\n        case UPDATE: \r\n            return users.map((user) => (user._id === action.payload._id ? action.payload: user));\r\n\r\n        default:\r\n            return users; \r\n    }\r\n};","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { applyMiddleware, compose, createStore } from 'redux';\nimport thunk from 'redux-thunk';\nimport App from './App';\nimport './index.css';\nimport reducers from './reducers/index';\n\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\nconst store = createStore(reducers, composeEnhancers(applyMiddleware(thunk)));\n\nReactDOM.render(\n  <Provider store={store}>\n      <App />\n  </Provider>,\n  document.getElementById('root'),\n); \n"],"sourceRoot":""}