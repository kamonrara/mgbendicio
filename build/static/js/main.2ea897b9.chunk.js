(this["webpackJsonpmern-stack-client"]=this["webpackJsonpmern-stack-client"]||[]).push([[0],{204:function(e,t,a){e.exports=a(294)},291:function(e,t,a){},292:function(e,t,a){},294:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(16),c=a.n(o),l=a(11),i=a(55),s=a(177),u=a(329),m=a(28),p=a(18),d=a(72),f=a(12),v=a(327),g=a(326),b=a(330),E=a(337),h=a(322),O=a(196),x=a(8),y=a.n(x),j=a(13),S="LOGOUT",N=a(178),w=a.n(N).a.create({baseURL:"http://localhost:5555"});w.interceptors.request.use((function(e){return localStorage.getItem("profile")&&(e.headers.Authorization="Bearer ".concat(JSON.parse(localStorage.getItem("profile")).token)),e}));var C=function(e){return w.get("/posts/".concat(e))},_=function(e){return w.get("/posts?page=".concat(e))},k=function(e){return w.patch("/posts/".concat(e,"/likePost"))},I=function(e,t){return w.post("/posts/".concat(t,"/commentPost"),{value:e})},T=function(e,t){return w.patch("/posts/".concat(e),t)},A=function(e){return w.delete("/posts/".concat(e))},R=function(e){return w.post("/users/signin",e)},F=function(e){return w.post("/users/signup",e)},D=function(e,t){return w.patch("/users/profile/".concat(e),t)},L=function(e){return w.get("/chat/conversations/".concat(e))},B=function(e){return w.get("/chat/messages/".concat(e))},P=function(e){return function(){var t=Object(j.a)(y.a.mark((function t(a){var n,r;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"START_LOADING"}),t.next=4,o=e,w.get("/posts/search?searchQuery=".concat(o.search||"none","&tags=").concat(o.tags));case 4:n=t.sent,r=n.data.data,a({type:"FETCH_BY_SEARCH",payload:r}),a({type:"END_LOADING"}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.log("getPostsBySearch error: ",t.t0);case 13:case"end":return t.stop()}var o}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()},U=function(e,t){return function(){var a=Object(j.a)(y.a.mark((function a(n){var r,o;return y.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n({type:"START_LOADING"}),a.next=4,c=e,w.post("/posts",c);case 4:r=a.sent,o=r.data,t.push("/posts/".concat(o._id)),n({type:"CREATE",payload:o}),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(0),console.log(a.t0);case 13:case"end":return a.stop()}var c}),a,null,[[0,10]])})));return function(e){return a.apply(this,arguments)}}()},M=function(e,t){return function(){var a=Object(j.a)(y.a.mark((function a(n){var r,o;return y.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,T(e,t);case 3:r=a.sent,o=r.data,n({type:"UPDATE",payload:o}),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),console.log(a.t0);case 11:case"end":return a.stop()}}),a,null,[[0,8]])})));return function(e){return a.apply(this,arguments)}}()},H=function(e){return function(){var t=Object(j.a)(y.a.mark((function t(a){var n,r,o;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=JSON.parse(localStorage.getItem("profile")),t.prev=1,t.next=4,k(e,null===n||void 0===n||n.token);case 4:r=t.sent,o=r.data,a({type:"LIKE",payload:o}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},W=function(e,t){return function(){var a=Object(j.a)(y.a.mark((function a(n){var r,o;return y.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,I(e,t);case 3:return r=a.sent,o=r.data,console.log("WARARARARAR:::: ",o),n({type:"COMMENT",payload:o}),a.abrupt("return",o.comments);case 10:a.prev=10,a.t0=a.catch(0),console.log(a.t0);case 13:case"end":return a.stop()}}),a,null,[[0,10]])})));return function(e){return a.apply(this,arguments)}}()},G=a(325),J=a(320),z=a(199),V=a(321),Y=a(197),X=a(323),K=a(324),q=a(183),Q=a.n(q),Z=a(184),$=a.n(Z),ee=a(107),te=a.n(ee),ae=a(129),ne=a.n(ae),re=a(101),oe=a.n(re),ce=a(318),le=Object(ce.a)({media:{height:0,paddingTop:"56.25%",backgroundColor:"rgba(0, 0, 0, 0.5)",backgroundBlendMode:"darken"},border:{border:"solid"},fullHeightCard:{height:"100%"},card:{display:"flex",flexDirection:"column",justifyContent:"space-between",borderRadius:"15px",height:"100%",position:"relative"},overlay:{position:"absolute",top:"20px",left:"20px",color:"white"},overlay2:{position:"absolute",top:"20px",right:"20px",color:"white"},grid:{display:"flex"},details:{display:"flex",justifyContent:"space-between",margin:"20px"},title:{padding:"0 16px"},cardActions:{padding:"0 16px 8px 16px",display:"flex",justifyContent:"space-between"},cardAction:{display:"block",textAlign:"initial"}}),ie=function(e){var t,a,o,c,i,s=e.post,u=e.setCurrentId,m=Object(l.b)(),v=le(),g=JSON.parse(localStorage.getItem("profile")),b=Object(p.g)(),E=Object(n.useState)(!1),O=Object(f.a)(E,2),x=(O[0],O[1],Object(n.useState)(null===s||void 0===s?void 0:s.likes)),S=Object(f.a)(x,2),N=S[0],w=S[1],C=(null===g||void 0===g?void 0:g.result.googleId)||(null===g||void 0===g||null===(t=g.result)||void 0===t?void 0:t._id),_=s.likes.find((function(e){return e===C})),k=function(){var e=Object(j.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m(H(s._id)),w(_?s.likes.filter((function(e){return e!==C})):[].concat(Object(d.a)(s.likes),[C]));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=function(){return N.length>0?N.find((function(e){return e===C}))?r.a.createElement(r.a.Fragment,null,r.a.createElement(Q.a,{fontSize:"small"}),"\xa0",N.length>2?"You and ".concat(N.length-1," others"):"".concat(N.length," like").concat(N.length>1?"s":"")):r.a.createElement(r.a.Fragment,null,r.a.createElement(ne.a,{fontSize:"small"}),"\xa0",N.length," ",1===N.length?"Like":"Likes"):r.a.createElement(r.a.Fragment,null,r.a.createElement(ne.a,{fontSize:"small"}),"\xa0Like")};return r.a.createElement(J.a,{className:v.card,raised:!0,elevation:6},r.a.createElement(z.a,{component:"span",className:v.cardAction,onClick:function(){return b.push("/posts/".concat(s._id))}},r.a.createElement(V.a,{className:v.media,image:s.selectedFile||"https://user-images.githubusercontent.com/194400/49531010-48dad180-f8b1-11e8-8d89-1e61320e1d82.png",title:s.title}),r.a.createElement("div",{className:v.overlay},r.a.createElement(Y.a,{variant:"h6"},s.owner),r.a.createElement(Y.a,{variant:"body2"},oe()(s.createdAt).fromNow())),((null===g||void 0===g||null===(a=g.result)||void 0===a?void 0:a.googleId)===(null===s||void 0===s?void 0:s.creator)||(null===g||void 0===g||null===(o=g.result)||void 0===o?void 0:o._id)===(null===s||void 0===s?void 0:s.creator))&&r.a.createElement("div",{className:v.overlay2},r.a.createElement(h.a,{onClick:function(){return u(s._id)},style:{color:"white"},size:"small"},r.a.createElement(te.a,{fontSize:"default"}))),r.a.createElement("div",{className:v.details},r.a.createElement(Y.a,{variant:"body2",color:"textSecondary",component:"h2"},s.tags.map((function(e){return"#".concat(e," ")})))),r.a.createElement(Y.a,{className:v.title,gutterBottom:!0,variant:"h5",component:"h2"},s.title),r.a.createElement(X.a,null,r.a.createElement(Y.a,{variant:"body2",color:"textSecondary",component:"p"},s.message))),r.a.createElement(K.a,{className:v.cardActions},r.a.createElement(h.a,{size:"small",color:"primary",disabled:!(null===g||void 0===g?void 0:g.result),onClick:k},r.a.createElement(I,null)),void 0!==(null===g||void 0===g||null===(c=g.result)||void 0===c?void 0:c._id)&&(null===g||void 0===g||null===(i=g.result)||void 0===i?void 0:i._id)===(null===s||void 0===s?void 0:s.creator)&&r.a.createElement(h.a,{size:"small",color:"secondary",onClick:function(){return m((e=s._id,function(){var t=Object(j.a)(y.a.mark((function t(a){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,A(e);case 3:a({type:"DELETE",payload:e}),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.log(t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}()));var e}},r.a.createElement($.a,{fontSize:"small"})," Delete")))},se=Object(ce.a)((function(e){return{mainContainer:{display:"flex",alignItems:"center"},smMargin:{margin:e.spacing(1)},actionDiv:{textAlign:"center"}}})),ue=function(e){var t=e.setCurrentId,a=se(),n=Object(l.c)((function(e){return e.posts})),o=n.posts,c=n.isLoading;return o.length||c?c?r.a.createElement(G.a,null):r.a.createElement(g.a,{className:a.container,container:!0,alignItems:"stretch",spacing:3},null===o||void 0===o?void 0:o.map((function(e){return r.a.createElement(g.a,{key:e._id,item:!0,xs:12,sm:12,md:6,lg:3},r.a.createElement(ie,{post:e,setCurrentId:t}))}))):"No posts"},me=a(7),pe=a(185),de=a.n(pe),fe=Object(ce.a)((function(e){return{root:{"& .MuiTextField-root":{margin:e.spacing(1)}},paper:{padding:e.spacing(2)},form:{display:"flex",flexWrap:"wrap",justifyContent:"center"},fileInput:{width:"97%",margin:"10px 0"},buttonSubmit:{marginBottom:10}}})),ve=function(e){var t,a=e.currentId,o=e.setCurrentId,c=Object(n.useState)({title:"",owner:"",message:"",tags:"",selectedFile:""}),i=Object(f.a)(c,2),s=i[0],u=i[1],m=Object(l.c)((function(e){return a?e.posts.posts.find((function(e){return e._id===a})):null})),d=Object(l.b)(),v=fe(),g=JSON.parse(localStorage.getItem("profile")),b=Object(p.g)();Object(n.useEffect)((function(){m&&u(m)}),[m]);var x=function(){o(0),u({title:"",owner:"",message:"",tags:"",selectedFile:""})},S=function(){var e=Object(j.a)(y.a.mark((function e(t){var n,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),0===a?(d(U(Object(me.a)(Object(me.a)({},s),{},{owner:null===g||void 0===g||null===(n=g.result)||void 0===n?void 0:n.firstname}),b)),x()):(d(M(a,Object(me.a)(Object(me.a)({},s),{},{owner:null===g||void 0===g||null===(r=g.result)||void 0===r?void 0:r.firstname}))),x());case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(null===g||void 0===g||null===(t=g.result)||void 0===t?void 0:t._id)?r.a.createElement(O.a,{className:v.paper,elevation:6},r.a.createElement("form",{autoComplete:"off",noValidate:!0,className:"".concat(v.root," ").concat(v.form),onSubmit:S},r.a.createElement(Y.a,{variant:"h6"},a?'Editing "'.concat(m.title,'"'):"Creating a Post"),r.a.createElement(E.a,{name:"title",variant:"outlined",label:"Title",fullWidth:!0,value:s.title,onChange:function(e){return u(Object(me.a)(Object(me.a)({},s),{},{title:e.target.value}))}}),r.a.createElement(E.a,{name:"message",variant:"outlined",label:"Message",fullWidth:!0,multiline:!0,rows:4,value:s.message,onChange:function(e){return u(Object(me.a)(Object(me.a)({},s),{},{message:e.target.value}))}}),r.a.createElement(E.a,{name:"tags",variant:"outlined",label:"Tags (coma separated)",fullWidth:!0,value:s.tags,onChange:function(e){return u(Object(me.a)(Object(me.a)({},s),{},{tags:e.target.value.split(",")}))}}),r.a.createElement("div",{className:v.fileInput},r.a.createElement(de.a,{type:"file",multiple:!1,onDone:function(e){var t=e.base64;return u(Object(me.a)(Object(me.a)({},s),{},{selectedFile:t}))}})),r.a.createElement(h.a,{className:v.buttonSubmit,variant:"contained",color:"primary",size:"large",type:"submit",fullWidth:!0},"Submit"),r.a.createElement(h.a,{variant:"contained",color:"secondary",size:"small",onClick:x,fullWidth:!0},"Clear"))):r.a.createElement(O.a,{className:v.paper},r.a.createElement(Y.a,{variant:"h6",align:"center"},"Please Sign In to upload photo/s"))},ge=a(343),be=a(339),Ee=Object(ce.a)((function(){return{ul:{justifyContent:"space-around"}}})),he=function(e){var t=e.page,a=Object(l.c)((function(e){return e.posts})).numberOfPages,o=Ee(),c=Object(l.b)();return Object(n.useEffect)((function(){t&&c(function(e){return function(){var t=Object(j.a)(y.a.mark((function t(a){var n,r;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"START_LOADING"}),t.next=4,_(e);case 4:n=t.sent,r=n.data,a({type:"FETCH_POSTS",payload:r}),a({type:"END_LOADING"}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.log("client>src>action>posts>getPosts: ",t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()}(t))}),[t]),r.a.createElement(ge.a,{classes:{ul:o.ul},count:a,page:Number(t)||1,variant:"outlined",color:"primary",renderItem:function(e){return r.a.createElement(be.a,Object.assign({},e,{component:m.b,to:"/posts?page=".concat(e.page)}))}})},Oe=a(186),xe=a.n(Oe),ye=a(26),je=Object(ce.a)((function(e){var t;return{appBarSearch:{borderRadius:4,marginBottom:"1rem",display:"flex",padding:"16px"},pagination:{borderRadius:4,marginTop:"1rem",padding:"16px"},gridContainer:(t={display:"flex"},Object(ye.a)(t,e.breakpoints.down("xs"),{flexDirection:"column-reverse"}),Object(ye.a)(t,e.breakpoints.down("md"),{flexDirection:"column-reverse"}),t),mainDiv:{display:"flex"}}}));var Se=function(){var e=je(),t=Object(n.useState)(0),a=Object(f.a)(t,2),o=a[0],c=a[1],i=Object(l.b)(),s=new URLSearchParams(Object(p.h)().search),m=Object(p.g)(),x=s.get("page")||1,y=s.get("searchQuery"),j=Object(n.useState)(""),S=Object(f.a)(j,2),N=S[0],w=S[1],C=Object(n.useState)([]),_=Object(f.a)(C,2),k=_[0],I=_[1],T=function(){N.trim()||k?(i(P({search:N,tags:k.join(",")})),m.push("/posts/search?searchQuery=".concat(N||"none"," &tags=").concat(k.join(",")))):m.push("/")};return r.a.createElement(v.a,{in:!0},r.a.createElement(u.a,{maxWidth:"xl"},r.a.createElement(g.a,{container:!0,justify:"space-between",alignItems:"stretch",spacing:3,className:e.gridContainer},r.a.createElement(g.a,{item:!0,xs:12,sm:6,md:9},r.a.createElement(ue,{setCurrentId:c})),r.a.createElement(g.a,{item:!0,xs:12,sm:6,md:3},r.a.createElement(b.a,{className:e.appBarSearch,position:"static",color:"inherit"},r.a.createElement(E.a,{name:"search",variant:"outlined",label:"Search Posts",fullWidth:!0,value:N,onChange:function(e){return w(e.target.value)},onKeyPress:function(e){13===e.keyCode&&T()}}),r.a.createElement(xe.a,{style:{margin:"10px 0"},value:k,onAdd:function(e){return I([].concat(Object(d.a)(k),[e]))},onDelete:function(e){return I(k.filter((function(t){return t!==e})))},label:"Search Hash Tags",variant:"outlined"}),r.a.createElement(h.a,{onClick:T,className:e.searchButton,variant:"contained",color:"primary"},"Search")),r.a.createElement(ve,{currentId:o,setCurrentId:c}),!y&&!k.length&&r.a.createElement(O.a,{elevation:6,className:e.pagination},r.a.createElement(he,{page:x}))))))},Ne=a(331),we=a(332),Ce=a(340),_e=a(341),ke=a(333),Ie=a(342),Te=a(188),Ae=a.n(Te),Re=a(189),Fe=a.n(Re),De=a(187),Le=Object(ce.a)((function(e){var t;return{siteTitle:{fontWeight:"bold",letterSpacing:1.5},toolbar:Object(ye.a)({backgroundColor:"#6db4e3",display:"flex",flexDirection:"row"},e.breakpoints.up("md"),{flexDirection:"row",justifyContent:"space-between"}),menuBox:Object(ye.a)({display:"flex",flexDirection:"row"},e.breakpoints.up("md"),{flexDirection:"row"}),menuOption:(t={padding:e.spacing(1)},Object(ye.a)(t,e.breakpoints.up("md"),{paddingLeft:e.spacing(10)}),Object(ye.a)(t,"color","white"),t),menuIcon:{color:"white",fontSize:"33px"},heading:{display:"flex",fontFamily:"Segoe UI",marginLeft:"33px"},profile:{display:"flex"},userName:{display:"flex",fontFamily:"Segoe UI",alignItems:"center",padding:"11px 11px 11px 11px"},avatar:{padding:"11px 11px 11px 11px",color:"gray",backgroundColor:"white"},leftDiv:{display:"flex",flexDirection:"row",paddingLeft:"33px"},rightDiv:{display:"flex",alignItems:"center",paddingRight:"3em"},mobileBox:{display:"flex"},mobileHeading:{display:"flex",justifyContent:"center",fontFamily:"Segoe UI"}}}));function Be(){var e=Object(n.useState)(JSON.parse(localStorage.getItem("profile"))),t=Object(f.a)(e,2),a=t[0],o=t[1],c=Object(l.b)(),i=Object(p.h)(),s=Object(p.g)(),d=Le(),v=function(){c({type:S}),s.push("/auth"),o(null)};Object(n.useEffect)((function(){var e=null===a||void 0===a?void 0:a.token;e&&(1e3*Object(De.a)(e).exp<(new Date).getTime()&&v());o(JSON.parse(localStorage.getItem("profile")))}),[i]);var g=Object(n.useState)({toggleMenu:!1,toggleMenuOpen:!1}),E=Object(f.a)(g,2),O=E[0],x=E[1],y=O.toggleMenu,j=O.toggleMenuOpen;Object(n.useEffect)((function(){var e=function(){return window.innerWidth<960?x((function(e){return Object(me.a)(Object(me.a)({},e),{},{toggleMenu:!0})})):x((function(e){return Object(me.a)(Object(me.a)({},e),{},{toggleMenu:!1})}))};e(),window.addEventListener("resize",(function(){return e()}))}),[]);var N=function(){return r.a.createElement(_e.a,{className:d.mobileBox},(null===a||void 0===a?void 0:a.result)?r.a.createElement("div",null,r.a.createElement(h.a,{component:m.b,to:"/",className:d.mobileHeading},"Home"),r.a.createElement(h.a,{component:m.b,to:"/chat",className:d.mobileHeading},"Messenger"),r.a.createElement(ke.a,{style:{marginBottom:"11px"}}),r.a.createElement(Y.a,{className:d.mobileHeading,variant:"h6"},null===a||void 0===a?void 0:a.result.firstname),r.a.createElement(h.a,{variant:"contained",style:{display:"flex",fontFamily:"Segoe UI"},color:"secondary",onClick:v},"Logout")):r.a.createElement("div",null,r.a.createElement(h.a,{component:m.b,to:"/",className:d.mobileHeading},"Home"),r.a.createElement(h.a,{component:m.b,to:"/auth",variant:"contained",color:"primary",style:{fontFamily:"Segoe UI"}},"Sign In")))};return r.a.createElement(u.a,null,r.a.createElement(b.a,null,y?r.a.createElement(Ne.a,{style:{backgroundColor:"#6db4e3"}},r.a.createElement(we.a,{onClick:function(){return x((function(e){return Object(me.a)(Object(me.a)({},e),{},{toggleMenuOpen:!0})}))}},r.a.createElement(Ae.a,{className:d.menuIcon})),r.a.createElement(Ce.a,{anchor:"left",open:j,onClose:function(){return x((function(e){return Object(me.a)(Object(me.a)({},e),{},{toggleMenuOpen:!1})}))}},r.a.createElement("div",null,N()))):r.a.createElement(Ne.a,{className:d.toolbar},r.a.createElement(_e.a,{className:d.menuBox},r.a.createElement(Fe.a,{style:{fontSize:"33px"}}),r.a.createElement(h.a,{component:m.b,to:"/",className:d.heading},"Home"),(null===a||void 0===a?void 0:a.result)&&r.a.createElement(h.a,{component:m.b,to:"/chat",className:d.heading},"Messenger")),r.a.createElement(_e.a,{className:d.menuBox},r.a.createElement("div",{className:d.rightDiv},(null===a||void 0===a?void 0:a.result)?r.a.createElement("div",{className:d.profile},r.a.createElement(Ie.a,{className:d.avatar,alt:null===a||void 0===a?void 0:a.result.firstname,src:null===a||void 0===a?void 0:a.result.imageUrl},null===a||void 0===a?void 0:a.result.firstname.charAt(0)),r.a.createElement(Y.a,{className:d.userName,variant:"h6"},null===a||void 0===a?void 0:a.result.firstname),r.a.createElement(h.a,{variant:"contained",style:{fontFamily:"Segoe UI"},color:"secondary",onClick:v},"Logout")):r.a.createElement(h.a,{component:m.b,to:"/auth",variant:"contained",color:"primary",style:{fontFamily:"Segoe UI"}},"Sign In"))))))}var Pe=a(192),Ue=a.n(Pe),Me=Object(ce.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center",padding:e.spacing(2)},root:{"& .MuiTextField-root":{margin:e.spacing(1)}},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)},googleButton:{marginBottom:e.spacing(2)}}})),He=a(334),We=a(190),Ge=a.n(We),Je=a(191),ze=a.n(Je),Ve=function(e){var t=e.name,a=e.handleChange,n=e.label,o=e.half,c=e.autoFocus,l=e.type,i=e.handleShowPassword;return r.a.createElement(g.a,{item:!0,xs:12,sm:o?6:12},r.a.createElement(E.a,{name:t,onChange:a,variant:"outlined",required:!0,fullWidth:!0,label:n,autoFocus:c,type:l,InputProps:"password"===t?{endAdornment:r.a.createElement(He.a,{position:"end"},r.a.createElement(we.a,{onClick:i},"password"===l?r.a.createElement(Ge.a,null):r.a.createElement(ze.a,null)))}:null}))},Ye={firstName:"",lastName:"",email:"",password:"",confirmPassword:""},Xe=function(){var e=Object(n.useState)(Ye),t=Object(f.a)(e,2),a=t[0],o=t[1],c=Object(n.useState)(!1),i=Object(f.a)(c,2),s=i[0],m=i[1],d=Object(l.b)(),v=Object(p.g)(),b=Me(),E=Object(n.useState)(!1),x=Object(f.a)(E,2),S=x[0],N=x[1],w=function(e){return o(Object(me.a)(Object(me.a)({},a),{},Object(ye.a)({},e.target.name,e.target.value)))};return r.a.createElement(u.a,{component:"main",maxWidth:"xs"},r.a.createElement(O.a,{className:b.paper,elevation:3},r.a.createElement(Ie.a,{className:b.avatar},r.a.createElement(Ue.a,null)),r.a.createElement(Y.a,{component:"h1",variant:"h5"},s?"Sign up":"Sign in"),r.a.createElement("form",{className:b.form,onSubmit:function(e){var t,n;e.preventDefault(),d(s?(t=a,n=v,function(){var e=Object(j.a)(y.a.mark((function e(a){var r,o;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F(t);case 3:r=e.sent,o=r.data,a({type:"AUTH",data:o}),n.push("/"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()):function(e,t){return function(){var a=Object(j.a)(y.a.mark((function a(n){var r,o;return y.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,R(e);case 3:r=a.sent,o=r.data,n({type:"AUTH",data:o}),t.push("/posts"),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),console.log(a.t0);case 12:case"end":return a.stop()}}),a,null,[[0,9]])})));return function(e){return a.apply(this,arguments)}}()}(a,v))}},r.a.createElement(g.a,{container:!0,spacing:2},s&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Ve,{name:"firstName",label:"Firstname",handleChange:w,autoFocus:!0,half:!0}),r.a.createElement(Ve,{name:"lastName",label:"Lastname",handleChange:w,half:!0})),r.a.createElement(Ve,{name:"email",label:"Email Address",handleChange:w,type:"email"}),r.a.createElement(Ve,{name:"password",label:"Password",handleChange:w,type:S?"text":"password",handleShowPassword:function(){return N(!S)}}),s&&r.a.createElement(Ve,{name:"confirmPassword",label:"Repeat Password",handleChange:w,type:"password"})),r.a.createElement(h.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:b.submit},s?"Sign Up":"Sign In"),r.a.createElement(g.a,{container:!0,justify:"flex-end"},r.a.createElement(g.a,{item:!0},r.a.createElement(h.a,{onClick:function(){o(Ye),m((function(e){return!e})),N(!1)}},s?"Already have an account? Sign in":"Don't have an account? Sign Up"))))))},Ke=function(e,t){return function(){var a=Object(j.a)(y.a.mark((function a(n){var r,o;return y.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,D(e,t);case 3:r=a.sent,o=r.data,n({type:"UPDATE",payload:o}),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),console.log(a.t0);case 11:case"end":return a.stop()}}),a,null,[[0,8]])})));return function(e){return a.apply(this,arguments)}}()},qe=Object(ce.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center",padding:e.spacing(2)},root:{"& .MuiTextField-root":{margin:e.spacing(1)}},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,1,2),float:"right"},googleButton:{marginBottom:e.spacing(2)}}})),Qe=function(e){var t=e.name,a=e.onChange,n=e.label,o=e.half,c=e.autoFocus,l=e.type,i=e.value;return r.a.createElement(g.a,{item:!0,xs:12,sm:o?6:12},r.a.createElement(E.a,{type:l,name:t,defaultValue:i,onChange:a,variant:"outlined",required:!0,fullWidth:!0,label:n,autoFocus:c}))},Ze={firstname:"",lastname:"",email:""},$e=function(){var e,t,a,o,c=Object(n.useState)(Ze),i=Object(f.a)(c,2),s=i[0],m=i[1],p=Object(l.b)(),d=qe(),b=JSON.parse(localStorage.getItem("profile")),E=null===b||void 0===b||null===(e=b.result)||void 0===e?void 0:e._id,x=null===b||void 0===b||null===(t=b.result)||void 0===t?void 0:t.email,S=null===b||void 0===b||null===(a=b.result)||void 0===a?void 0:a.firstname,N=null===b||void 0===b||null===(o=b.result)||void 0===o?void 0:o.lastname;console.log("[PROFILE] currentUserId: ",E),console.log("[PROFILE] handleSubmit/localStorage-email: ",x),console.log("[PROFILE] handleSubmit/localStorage-firstname: ",S),console.log("[PROFILE] handleSubmit/localStorage-lastname: ",N);var w=function(e){return m(Object(me.a)(Object(me.a)({},s),{},Object(ye.a)({},e.target.name,e.target.value)))},C=function(){var e=Object(j.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),p(Ke(E,s));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(v.a,{in:!0},r.a.createElement(u.a,{component:"main",maxWidth:"xs"},r.a.createElement(O.a,{className:d.paper,elevation:3},r.a.createElement(Y.a,{component:"h1",variant:"h5"}," Update Profile "),r.a.createElement("form",{className:d.form,onSubmit:C},r.a.createElement(g.a,{container:!0,spacing:2},r.a.createElement(Qe,{name:"firstname",label:"Firstname",value:S,onChange:w,half:!0}),r.a.createElement(Qe,{name:"lastname",label:"Lastname",value:N,onChange:w,half:!0}),r.a.createElement(Qe,{name:"email",label:"Email Address",value:x,onChange:w,type:"email"})),r.a.createElement(h.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:d.submit},"UPDATE")))))},et=a(336),tt=a(335),at=function(e){return function(){var t=Object(j.a)(y.a.mark((function t(a){var n,r;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,B(e);case 3:n=t.sent,r=n.data,a({type:"FETCH_MESSAGES",payload:r}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log("[ERROR]-redux-action-chat-message: ",t.t0.name);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},nt=function(e){return function(){var t=Object(j.a)(y.a.mark((function t(a){var n,r;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,L(e);case 3:n=t.sent,r=n.data,a({type:"FETCH_CONVERSATION",payload:r}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log("[ERROR][REDUX-ACTION-GET-CONVERSATION]",t.t0.name);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},rt=function(e){return{type:"SET_CONVERSATION_WITH",payload:e}},ot=a(193),ct=a.n(ot),lt=a(71),it=a.n(lt),st=it()("localhost:5555"),ut=Object(ce.a)({mainContainer:{overflowY:"auto",backgroundColor:"#FFFFFF",padding:"11px 11px 11px 11px"},purple:{backgroundColor:tt.a[500]},Label:{fontWeight:"bold",display:"flex",fontFamily:"Segoe UI",paddingBottom:"9px"},UserContent:{display:"flex",fontWeight:"bold",fontFamily:"Segoe UI",paddingLeft:"9px"}}),mt=function(){var e,t=ut(),a=Object(l.b)(),o=Object(l.c)((function(e){return e.conversations})),c=Object(l.c)((function(e){return e.conversation_data})),i=JSON.parse(localStorage.getItem("profile")),s=null===i||void 0===i||null===(e=i.result)||void 0===e?void 0:e._id,u=null===c||void 0===c?void 0:c.conversation_id,m=Object(n.useState)({conversation_id:"",conversation_name:""}),p=Object(f.a)(m,2),d=p[0],v=p[1];Object(n.useEffect)((function(){""===d.conversation_id&&0===d.conversation_id.length&&""===d.conversation_id||(a(at(d.conversation_id)),a({type:"SET_CONVERSATION",payload:{conversation_id:d.conversation_id,conversation_name:d.conversation_name}}),a(rt(o.name)))}),[d]);var b=o[o.length-1];'"'.concat(JSON.stringify(b),'"').split(",").map((function(e){var t=e.replace(/['"]+/g,"");if(!0===t.includes("_id")){t.split("_id:").pop();c.conversation_with}}));var E=Object(n.useState)(0),h=Object(f.a)(E,2),x=h[0],y=h[1];Object(n.useEffect)((function(){0!==x&&(st.on("updateMessage",(function(e){y(e.updatingFlag)})),st.on("updateConversation",(function(e){y(e.updatingFlag)}))),a(nt(s)),st.on("updateMessage",(function(e){y(e.updatingFlag)})),""!==d.conversation_id&&a(at(d.conversation_id))}),[x]);var j=Object(n.useRef)(null);return Object(n.useEffect)((function(){null!==j.current&&j.current.click()}),[o]),(null===o||void 0===o?void 0:o.length)?r.a.createElement(g.a,{container:!0,className:t.mainContainer,component:O.a},r.a.createElement(Y.a,{className:t.Label}," INBOX "),o.map((function(e){return r.a.createElement(g.a,{key:e._id,container:!0,item:!0,lg:12,md:12,sm:12},r.a.createElement(ct.a,null),r.a.createElement(et.a,{ref:j,key:e.conversation_id,component:"button",onClick:function(){return t={conversation_id:e._id,conversation_name:e.name},void(0===u&&0===u.length&&void 0===u||v(Object(me.a)(Object(me.a)({},d),t)));var t}},r.a.createElement(Y.a,{className:t.UserContent},e.name)))}))):r.a.createElement(G.a,null)},pt=(a(291),function(e){var t,a=e.message,o=Object(n.useState)(""),c=Object(f.a)(o,2),l=c[0],i=c[1],s=Object(n.useState)({color:""}),u=Object(f.a)(s,2),m=u[0],p=u[1],d=JSON.parse(localStorage.getItem("profile")),v=null===d||void 0===d||null===(t=d.result)||void 0===t?void 0:t._id;return Object(n.useEffect)((function(){a.owner===v?(i("flex-start"),p(Object(me.a)(Object(me.a)({},m),{},{color:"#2534da"}))):(i("flex-end"),p(Object(me.a)(Object(me.a)({},m),{},{color:"#61658f"})))}),[a]),r.a.createElement(g.a,{style:{display:"flex",justifyContent:l},item:!0,xs:12,sm:12,md:12},r.a.createElement(Y.a,{className:"messageBox",style:{background:m.color,fontFamily:"Segoe UI",margin:"1px 3px 1px 3px"}},a.content))}),dt=a(194),ft=Object(ce.a)({scrollFeed:{height:300,backgroundColor:"#e0e0e0"},Label:{fontWeight:"bold",fontFamily:"Segoe UI",display:"flex",padding:"11px 11px 11px 11px"}}),vt=it()("localhost:5555"),gt=function(){var e,t,a,o,c=ft(),i=Object(l.b)(),s=Object(l.c)((function(e){return e.messages})),u=Object(l.c)((function(e){return e.conversation_data})),m=JSON.parse(localStorage.getItem("profile")),p=null===m||void 0===m||null===(e=m.result)||void 0===e?void 0:e._id;Object(n.useEffect)((function(){void 0!==u.conversation_id&&i(at(u.conversation_id))}),[]);var d=Object(n.useState)(),v=Object(f.a)(d,2),b=v[0],E=v[1];Object(n.useEffect)((function(){vt.on("typing-activated",(function(e){E(e)}))}),[b]);var h=Object(n.useState)(0),O=Object(f.a)(h,2),x=O[0],y=O[1];Object(n.useEffect)((function(){void 0===u.conversation_id&&i(nt(p)),void 0!==u.conversation_id&&i(at(u.conversation_id)),vt.on("updateMessage",(function(e){console.log("[Message]: socket-on-updateMessage ",e),y(e)}))}),[x]);var j=Object(n.useState)({conversation_id:"",conversation_name:""}),S=Object(f.a)(j,2),N=S[0];S[1];return Object(n.useEffect)((function(){""===N.conversation_id&&0===N.conversation_id.length&&""===N.conversation_id||i(at(N.conversation_id))}),[N]),r.a.createElement(r.a.Fragment,null,r.a.createElement(Y.a,{className:c.Label},"CONVERSATION WITH : \xa0\xa0",(null===u||void 0===u||null===(t=u.conversation_with)||void 0===t||null===(a=t.name)||void 0===a?void 0:a.length)?null===u||void 0===u||null===(o=u.conversation_with)||void 0===o?void 0:o.name:u.conversation_name),r.a.createElement(dt.a,{className:c.scrollFeed},s.map((function(e){return r.a.createElement(g.a,{key:e._id,container:!0,item:!0,xs:12,sm:12,md:12},r.a.createElement(pt,{message:e}))}))))},bt=Object(ce.a)({mainContainer:{display:"flex",flexDirection:"column",overflowY:"auto",backgroundColor:"#FFFFFF",padding:"11px 11px 11px 11px"},userLink:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"3px 3px 3px 3px",height:"33px"},Label:{display:"flex",fontWeight:"bold",fontFamily:"Segoe UI",paddingBottom:"9px"},UserContent:{display:"flex",fontWeight:"bold",fontFamily:"Segoe UI",paddingLeft:"9px"}}),Et=0,ht=function(){var e=bt(),t=Object(l.b)(),a=Object(l.c)((function(e){return e.users}));Object(l.c)((function(e){return e.conversation_data}));console.log("userlist ",a),Object(n.useEffect)((function(){t(function(){var e=Object(j.a)(y.a.mark((function e(t){var a,n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.get("/users");case 3:a=e.sent,n=a.data,t({type:"FETCH_USERS",payload:n}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()),console.log("userlist/useEffect ",a),Et=0}),[]);var o=Object(n.useState)({name:"",id:""}),c=Object(f.a)(o,2),i=c[0],s=c[1];return Object(n.useEffect)((function(){0===i.length&&void 0===i||(t(function(){var e=Object(j.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{t({type:"RESET_CONVERSATION_DATA"})}catch(a){console.log(a)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t(rt(i)),t(function(){var e=Object(j.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{t({type:"RESET_MESSAGES"})}catch(a){console.log(a)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}),[i]),Et+=1,console.log("userlist ctr: ",Et),(null===a||void 0===a?void 0:a.length)?r.a.createElement(g.a,{container:!0,className:e.mainContainer,component:O.a},r.a.createElement(Y.a,{className:e.Label},"USER LIST"),a.map((function(t){return r.a.createElement(et.a,{key:t._id,className:e.userLink,component:O.a,elevation:9,onClick:function(){return s({name:t.firstname,id:t._id})}},r.a.createElement(h.a,{className:e.UserContent}," ",t.firstname,"  "),r.a.createElement(h.a,{style:{color:"black"},size:"small"},r.a.createElement(te.a,{fontSize:"default"})))}))):r.a.createElement(G.a,null)},Ot=it()("localhost:5555"),xt=Object(ce.a)({Box:{display:"flex",justifyContent:"space-around",margin:"3px 3px 3px 3px"},messageTextfield:{display:"flex",margin:"22px 11px 11px 11px"},sendButton:{display:"flex",margin:"3px 3px 3px 3px",fontFamily:"Segoe UI"}}),yt=function(){var e,t=xt(),a=Object(l.b)(),o=JSON.parse(localStorage.getItem("profile")),c=null===o||void 0===o||null===(e=o.result)||void 0===e?void 0:e._id,i=Object(l.c)((function(e){return e.conversation_data})),s=Object(n.useState)({owner:"",conversationId:"",content:""}),u=Object(f.a)(s,2),m=u[0],p=u[1],d=Object(n.useState)(0),v=Object(f.a)(d,2),g=(v[0],v[1]),b=Object(n.useState)({conversation:{participants:[],name:"",lastMessageId:333},messages:{owner:"",conversationId:"",content:""}}),x=Object(f.a)(b,1)[0],S=Object(n.useState)(""),N=Object(f.a)(S,2),C=N[0],_=N[1],k=null===i||void 0===i?void 0:i.conversation_id,I=function(){var e=Object(j.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:void 0===i.conversation_with?(p(Object(me.a)(Object(me.a)({},m),{},{content:t})),_((function(e){return t}))):_(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("form",{autoComplete:"off",noValidate:!0,onSubmit:function(e){if(e.preventDefault(),_(""),void 0===(null===i||void 0===i?void 0:i.conversation_with))a((o=Object(me.a)(Object(me.a)({},m),{},{owner:c,conversationId:null===i||void 0===i?void 0:i.conversation_id}),function(){var e=Object(j.a)(y.a.mark((function e(t){var a,n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r=o,w.post("/chat/messages",r);case 3:a=e.sent,n=a.data,t({type:"CREATE_MESSAGE",payload:n}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("action-createMessage error: ",e.t0);case 11:case"end":return e.stop()}var r}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}())),Ot.emit("sendMessage",{type:"message"},(function(){}));else if(void 0!==(null===i||void 0===i?void 0:i.conversation_with)){var t,n;a((r=Object(me.a)(Object(me.a)({},x),{},{conversation:{participants:[c,null===i||void 0===i||null===(t=i.conversation_with)||void 0===t?void 0:t.id],name:"".concat(null===i||void 0===i||null===(n=i.conversation_with)||void 0===n?void 0:n.name)},messages:{owner:c,content:C}}),function(){var e=Object(j.a)(y.a.mark((function e(t){var a,n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o=r,w.post("/chat/conversations",o);case 3:a=e.sent,n=a.data,t({type:"CREATE_CONVERSATION_AND_MESSAGE",payload:n}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("[ERROR][REDUX-ACTION-CREATE-CONVERSATION-AND-MESSAGE]",e.t0.name);case 11:case"end":return e.stop()}var o}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}())),Ot.emit("sendMessage",{type:"conversation-message"})}else console.log("[CHAT]: do nothing...");var r,o}},r.a.createElement(_e.a,{className:t.Box,component:O.a},r.a.createElement(E.a,{className:t.messageTextfield,name:"message",variant:"outlined",label:"Send Message...",fullWidth:!0,multiline:!0,rows:2,onChange:function(e){return I(e.target.value)},onKeyPress:function(){g((function(e){return e+1})),Ot.emit("typing",{userId:c,conversationId:k}),Ot.on("typing-activated",(function(e){}))},value:C}),r.a.createElement(h.a,{type:"submit",className:t.sendButton,color:"primary",variant:"contained"}," Send ")))},jt=Object(ce.a)({messageBody:{padding:10},controller:{padding:10},messageTextfield:{margin:"22px 11px 11px 11px"},messagePaper:{paddingTop:30},container:{display:"flex",flexDirection:"row"},padding:{padding:"9px 9px 9px 9px"}}),St=0,Nt=function(){var e,t=jt(),a=JSON.parse(localStorage.getItem("profile")),o=null===a||void 0===a||null===(e=a.result)||void 0===e?void 0:e._id,c=Object(l.b)();return Object(n.useEffect)((function(){c(nt(o)),St=0}),[]),St+=1,console.log("chat ctr: ",St),r.a.createElement(v.a,{in:!0},r.a.createElement(u.a,null,r.a.createElement(g.a,{className:t.container,container:!0},r.a.createElement(g.a,{item:!0,xs:12,sm:12,md:12,lg:4,className:t.padding,elevation:12},r.a.createElement(ht,null)),r.a.createElement(g.a,{item:!0,xs:12,sm:12,md:12,lg:4,className:t.padding,elevation:12},r.a.createElement(mt,null)),r.a.createElement(g.a,{item:!0,xs:12,sm:12,md:12,lg:4,className:t.controller,component:O.a,elevation:12},r.a.createElement(gt,null),r.a.createElement(yt,null)))))},wt=Object(ce.a)((function(e){return{media:{borderRadius:"20px",objectFit:"cover",width:"100%",maxHeight:"600px"},card:Object(ye.a)({display:"flex",width:"100%"},e.breakpoints.down("sm"),{flexWrap:"wrap",flexDirection:"column"}),section:{borderRadius:"20px",margin:"10px",flex:1},imageSection:Object(ye.a)({marginLeft:"20px"},e.breakpoints.down("sm"),{marginLeft:0}),recommendedPosts:Object(ye.a)({display:"flex"},e.breakpoints.down("sm"),{flexDirection:"column"}),loadingPaper:{display:"flex",justifyContent:"center",alignItems:"center",padding:"20px",borderRadius:"15px",height:"39vh"},commentsOuterContainer:{display:"flex",justifyContent:"space-between"},commentsInnerContainer:{height:"200px",overflowY:"auto",marginRight:"30px"}}})),Ct=function(e){var t,a=e.post,o=Object(l.b)(),c=Object(n.useRef)(),i=wt(),s=Object(n.useState)(null===a||void 0===a?void 0:a.comments),u=Object(f.a)(s,2),m=u[0],p=u[1],d=Object(n.useState)(""),v=Object(f.a)(d,2),g=v[0],b=v[1],O=JSON.parse(localStorage.getItem("profile")),x=function(){var e=Object(j.a)(y.a.mark((function e(){var t,n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(O.result.firstname," : ").concat(g),e.next=3,o(W(t,a._id));case 3:n=e.sent,p(n),b(""),c.current.scrollIntoView({behavior:"smooth"});case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement("div",{className:i.commentsOuterContainer},r.a.createElement("div",{className:i.commentsInnerContainer},r.a.createElement(Y.a,{gutterBottom:!0,variant:"h6"},"Comments"),m.map((function(e,t){return r.a.createElement(Y.a,{key:t,gutterBottom:!0,variant:"subtitle1"},r.a.createElement("strong",null,e.split(": ")[0]),e.split(":")[1])})),r.a.createElement("div",{ref:c})),(null===O||void 0===O||null===(t=O.result)||void 0===t?void 0:t.firstname)&&r.a.createElement("div",{style:{width:"70%"}},r.a.createElement(Y.a,{gutterBottom:!0,variant:"h6"},"Write a Comment"),r.a.createElement(E.a,{fullWidth:!0,rows:4,variant:"outlined",label:"Comment",multiline:!0,value:g,onChange:function(e){return b(e.target.value)}}),r.a.createElement(h.a,{style:{marginTop:"10px"},fullWidth:!0,disabled:!g,color:"primary",variant:"contained",onClick:x},"Comment"))))},_t=function(){var e=Object(l.c)((function(e){return e.posts})),t=e.post,a=e.posts,o=e.isLoading,c=Object(l.b)(),i=Object(p.g)(),s=wt(),u=Object(p.i)().id;if(Object(n.useEffect)((function(){c(function(e){return function(){var t=Object(j.a)(y.a.mark((function t(a){var n,r;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"START_LOADING"}),t.next=4,C(e);case 4:n=t.sent,r=n.data,a({type:"FETCH",payload:r}),a({type:"END_LOADING"}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.log("client>src>action>posts>getPost ERROR: ",t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()}(u))}),[u]),Object(n.useEffect)((function(){t&&c(P({search:"none",tags:null===t||void 0===t?void 0:t.tags.join(",")}))}),[t]),!t)return null;if(o)return r.a.createElement(O.a,{elevation:6,className:s.loadingPaper},r.a.createElement(G.a,{size:"7em"}));var m=a.filter((function(e){return e._id!==t._id}));return r.a.createElement(O.a,{style:{padding:"20px",borderRadius:"15px"},elevation:6},r.a.createElement("div",{className:s.card},r.a.createElement("div",{className:s.section},r.a.createElement(Y.a,{variant:"h3",component:"h2"},t.title),r.a.createElement(Y.a,{gutterBottom:!0,variant:"h6",color:"textSecondary",component:"h2"},t.tags.map((function(e){return"#".concat(e," ")}))),r.a.createElement(Y.a,{gutterBottom:!0,variant:"body1",component:"p"},t.message),r.a.createElement(Y.a,{variant:"h6"},"Created by: ",t.name),r.a.createElement(Y.a,{variant:"body1"},oe()(t.createdAt).fromNow()),r.a.createElement(ke.a,{style:{margin:"20px 0"}}),r.a.createElement(Y.a,{variant:"body1"},r.a.createElement("strong",null,"Realtime Chat - coming soon!")),r.a.createElement(ke.a,{style:{margin:"20px 0"}}),r.a.createElement(Ct,{post:t}),r.a.createElement(ke.a,{style:{margin:"20px 0"}})),r.a.createElement("div",{className:s.imageSection},r.a.createElement("img",{className:s.media,src:t.selectedFile||"https://user-images.githubusercontent.com/194400/49531010-48dad180-f8b1-11e8-8d89-1e61320e1d82.png",alt:t.title}))),m.length&&r.a.createElement("div",{className:s.section},r.a.createElement(Y.a,{gutterBottom:!0,variant:"h5"},"You might also like"),r.a.createElement(ke.a,null),r.a.createElement("div",{className:s.recommendedPosts},m.map((function(e){var t=e.title,a=e.message,n=e.name,o=e.likes,c=e.selectedFile,l=e._id;return r.a.createElement("div",{style:{margin:"20px",cursor:"pointer"},onClick:function(){return function(e){return i.push("/posts/".concat(e))}(l)},key:l},r.a.createElement(Y.a,{gutterBottom:!0,variant:"h6"},t),r.a.createElement(Y.a,{gutterBottom:!0,variant:"subtitle2"},n),r.a.createElement(Y.a,{gutterBottom:!0,variant:"subtitle2"},a),r.a.createElement(Y.a,{gutterBottom:!0,variant:"subtitle1"},"Likes: ",o.length),r.a.createElement("img",{src:c,width:"200px"}))})))))},kt=function(){var e=JSON.parse(localStorage.getItem("profile"));return console.log("[App] user: ",e),r.a.createElement(m.a,null,r.a.createElement(Be,null),r.a.createElement(u.a,{maxWidth:"xl",style:{marginTop:"99px"}},r.a.createElement(p.d,null,r.a.createElement(p.b,{path:"/",exact:!0,component:function(){return r.a.createElement(p.a,{to:"/posts"})}}),r.a.createElement(p.b,{path:"/posts",exact:!0,component:Se}),r.a.createElement(p.b,{path:"/posts/search",exact:!0,component:Se}),r.a.createElement(p.b,{path:"/posts/:id",component:_t}),r.a.createElement(p.b,{path:"/chat",exact:!0,component:Nt}),r.a.createElement(p.b,{path:"/auth",exact:!0,component:function(){return null===e?r.a.createElement(Xe,null):r.a.createElement(p.a,{to:"/"})}}),r.a.createElement(p.b,{path:"/user/profile",exact:!0,component:$e}))))},It=(a(292),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{authData:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTH":return localStorage.setItem("profile",JSON.stringify(Object(me.a)({},null===t||void 0===t?void 0:t.data))),Object(me.a)(Object(me.a)({},e),{},{authData:t.data,loading:!1,errors:null});case S:return localStorage.clear(),Object(me.a)(Object(me.a)({},e),{},{authData:null,loading:!1,errors:null});default:return e}}),Tt=(a(293),Object(i.c)({auth:It,conversations:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_CONVERSATION":return t.payload;case S:return[];default:return e}},conversation_data:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CONVERSATION":return t.payload;case"SET_CONVERSATION_WITH":return Object(me.a)(Object(me.a)({},e),{},{conversation_with:t.payload});case"RESET_CONVERSATION_DATA":case S:return[];default:return e}},messages:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_MESSAGES":return t.payload;case"RESET_MESSAGES":return[];case S:default:return e}},posts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoading:!0,posts:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"START_LOADING":return Object(me.a)(Object(me.a)({},e),{},{isLoading:!0});case"END_LOADING":return Object(me.a)(Object(me.a)({},e),{},{isLoading:!1});case"FETCH":return Object(me.a)(Object(me.a)({},e),{},{post:t.payload});case"FETCH_POSTS":return Object(me.a)(Object(me.a)({},e),{},{posts:t.payload.data,currentPage:t.payload.currentPage,numberOfPages:t.payload.numberOfPages});case"FETCH_BY_SEARCH":return Object(me.a)(Object(me.a)({},e),{},{posts:t.payload});case"LIKE":case"COMMENT":return Object(me.a)(Object(me.a)({},e),{},{posts:e.posts.map((function(e){return e._id===t.payload._id?t.payload:e}))});case"CREATE":return Object(me.a)(Object(me.a)({},e),{},{posts:[].concat(Object(d.a)(e.posts),[t.payload])});case"UPDATE":return Object(me.a)(Object(me.a)({},e),{},{posts:e.posts.map((function(e){return e._id===t.payload._id?t.payload:e}))});case"DELETE":return Object(me.a)(Object(me.a)({},e),{},{posts:e.posts.filter((function(e){return e._id!==t.payload}))});case S:default:return e}},users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_USERS":return t.payload;case"UPDATE":return e.map((function(e){return e._id===t.payload._id?t.payload:e}));default:return e}}})),At=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||i.d,Rt=Object(i.e)(Tt,At(Object(i.a)(s.a)));c.a.render(r.a.createElement(l.a,{store:Rt},r.a.createElement(kt,null)),document.getElementById("root"))}},[[204,1,2]]]);
//# sourceMappingURL=main.2ea897b9.chunk.js.map